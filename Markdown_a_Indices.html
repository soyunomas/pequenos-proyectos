<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador Markdown a HTML</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        /* === INICIO VARIABLES CSS GLOBALES === */
        :root {
            --color-h1: #0d6efd; --color-h2: #0dcaf0; --color-h3: #6c757d; --color-h4: #198754; --color-h5: #fd7e14; --color-h6: #6f42c1;
            --color-code: #d63384; --bg-pre: #f8f9fa; --bg-code-inline: #f8f9fa;
            --bg-indice: #f8f9fa; --color-indice-link: #0d6efd; --color-indice-link-hover: #0a58ca; --bg-indice-link-hover: #e9ecef;
            --color-indice-link-active: #212529; --bg-indice-link-active: #dee2e6;
            --border-ejercicios: #0dcaf0; --bg-ejercicios: #f8f9fa;
            --body-bg-color: #ffffff; --text-color: #212529; --link-color: #0d6efd;
            --copy-btn-bg: #6c757d; --copy-btn-color: white; --copy-btn-hover-bg: #5a6268; --copy-btn-success-bg: #198754;
        }
        /* === FIN VARIABLES CSS GLOBALES === */

        /* === ESTILOS DE LA APLICACIÓN GENERADORA (Interfaz - NO SE EXPORTAN) === */
        body.app-interface { padding-top: 1rem; padding-bottom: 1rem; background-color: var(--body-bg-color); color: var(--text-color); }
        body.app-interface h1 { color: var(--color-h1); }
        #markdownInput { min-height: 200px; font-family: monospace; font-size: 0.9rem; border: 1px solid #ced4da; border-radius: 0.375rem; background-color: var(--bg-pre); color: var(--text-color); }
        #previewSection { margin-top: 2rem; border-top: 1px solid #dee2e6; padding-top: 2rem; }
        #previewSection h2 { color: var(--color-h2); }
        .controls-container { display: flex; flex-wrap: wrap; gap: 0.5rem; align-items: center; margin-bottom: 1rem; }
        .controls-container .form-select { max-width: 200px; flex-grow: 1; background-color: var(--bg-indice); color: var(--text-color); border-color: #ced4da; }
        #insertAccordionBtn, #insertImageBtn { padding-top: 0.25rem; padding-bottom: 0.25rem; font-size: 0.8rem; }
        #insertAccordionBtn .bi, #insertImageBtn .bi { vertical-align: -0.1em; }
        .offcanvas { background-color: var(--body-bg-color); color: var(--text-color); }
        .offcanvas-header { border-bottom: 1px solid #dee2e6;}
        .offcanvas-header .btn-close { filter: invert(var(--bs-body-color-invert, 0)) sepia(var(--bs-body-color-sepia, 0)) saturate(var(--bs-body-color-saturate, 1)) hue-rotate(var(--bs-body-color-hue, 0deg)) brightness(var(--bs-body-color-brightness, 1)) contrast(var(--bs-body-color-contrast, 1)); }
        .offcanvas-body label { display: block; margin-bottom: 0.25rem; font-weight: 500; font-size: 0.875rem; color: var(--text-color); }
        .offcanvas-body input[type="color"] { width: 100%; height: 35px; border: 1px solid #ccc; padding: 0.2rem; cursor: pointer; border-radius: 0.25rem; background-color: white; }
        .offcanvas-body .form-group { margin-bottom: 0.8rem; }
        /* --- FIN ESTILOS APP --- */

        /* === INICIO ESTILOS UNIFICADOS para PREVISUALIZACIÓN y DESCARGA === */
        #previewSection #htmlOutputBody, .generated-html-body { position: relative; background-color: var(--body-bg-color); color: var(--text-color); }
        #previewSection #htmlOutputBody a, .generated-html-body a { color: var(--link-color); text-decoration: none; }
        #previewSection #htmlOutputBody a:hover, .generated-html-body a:hover { color: color-mix(in srgb, var(--link-color) 80%, black); text-decoration: underline; }
        #indiceContenidoPreview, #indiceContenido { position: sticky; top: 1rem; height: calc(100vh - 2rem); overflow-y: auto; border: 1px solid #dee2e6; border-radius: 0.375rem; padding: 1rem; background-color: var(--bg-indice); }
        #indiceContenidoPreview h5, #indiceContenido h5 { color: var(--color-h5); }
        #indiceContenidoPreview .nav-link, #indiceContenido .nav-link { color: var(--color-indice-link); padding-top: 0.3rem; padding-bottom: 0.3rem; border-radius: 0.25rem; font-size: 0.9rem; transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-weight: normal; }
        #indiceContenidoPreview .nav-link:hover, #indiceContenido .nav-link:hover { color: var(--color-indice-link-hover); background-color: var(--bg-indice-link-hover); }
        #indiceContenidoPreview .nav-link.active, #indiceContenidoPreview .nav-link:focus, #indiceContenido .nav-link.active, #indiceContenido .nav-link:focus { color: var(--color-indice-link-active); background-color: var(--bg-indice-link-active); font-weight: normal; }
        #indiceNavPreview .nav-link, #indiceNav .nav-link { padding-left: 0.5rem; }
        #indiceNavPreview .ps-3, #indiceNav .ps-3 { padding-left: 1.5rem !important; } #indiceNavPreview .ps-4, #indiceNav .ps-4 { padding-left: 2.5rem !important; } #indiceNavPreview .ps-5, #indiceNav .ps-5 { padding-left: 3.5rem !important; } #indiceNavPreview .ps-6, #indiceNav .ps-6 { padding-left: 4.5rem !important; }
        #mainContentPreview, #mainContent {}
        #mainContentPreview [id], #mainContent [id] { scroll-margin-top: 70px; }
        @media (max-width: 767.98px) { #mainContentPreview [id], #mainContent [id] { scroll-margin-top: 60px; } }
        #mainContentPreview h1, #mainContent h1 { color: var(--color-h1); font-size: 2.2rem; border-bottom: 1px solid #eee; padding-bottom: 0.5rem;}
        #mainContentPreview h2, #mainContent h2 { color: var(--color-h2); font-size: 1.8rem; border-bottom: 1px solid #eee; padding-bottom: 0.4rem;}
        #mainContentPreview h3, #mainContent h3 { color: var(--color-h3); font-size: 1.5rem; } #mainContentPreview h4, #mainContent h4 { color: var(--color-h4); font-size: 1.25rem; } #mainContentPreview h5, #mainContent h5 { color: var(--color-h5); font-size: 1.1rem; font-weight: bold; } #mainContentPreview h6, #mainContent h6 { color: var(--color-h6); font-size: 1rem; font-weight: bold; }
        #mainContentPreview p, #mainContentPreview li, #mainContent p, #mainContent li { line-height: 1.6; margin-bottom: 1rem; }
        #mainContentPreview ul, #mainContentPreview ol, #mainContent ul, #mainContent ol { padding-left: 2rem; } #mainContentPreview ul ul, #mainContent ul ul { margin-bottom: 0; }
        #mainContentPreview pre, #mainContent pre { position: relative; background-color: var(--bg-pre); border: 1px solid #dee2e6; border-radius: 0.25rem; padding: 1rem; padding-top: 2.5rem; overflow-x: auto; white-space: pre-wrap; word-break: break-all; margin-top: 1rem; margin-bottom: 1rem; font-size: 0.9em; }
        #mainContentPreview code, #mainContent code { color: var(--color-code); word-wrap: break-word; font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
        #mainContentPreview pre code, #mainContent pre code { background-color: transparent; border: none; padding: 0; font-size: 1em; white-space: pre-wrap; word-break: break-all; }
        #mainContentPreview :not(pre) > code, #mainContent :not(pre) > code { background-color: var(--bg-code-inline); padding: 0.2em 0.4em; margin: 0; font-size: 85%; border-radius: 3px; }
        .copy-code-btn { position: absolute; top: 0.5rem; right: 0.5rem; z-index: 10; padding: 0.25rem 0.5rem; font-size: 0.75rem; color: var(--copy-btn-color); background-color: var(--copy-btn-bg); border: none; border-radius: 0.25rem; cursor: pointer; opacity: 0.7; transition: opacity 0.2s ease-in-out, background-color 0.2s ease-in-out; }
        #mainContentPreview pre:hover .copy-code-btn, #mainContent pre:hover .copy-code-btn { opacity: 1; }
        .copy-code-btn:hover { background-color: var(--copy-btn-hover-bg); }
        .copy-code-btn.copied { background-color: var(--copy-btn-success-bg); }
        .copy-code-btn svg { width: 1em; height: 1em; vertical-align: -0.125em; margin-right: 0.3em;}
        #mainContentPreview h5 + ol, #mainContentPreview h5 + ul, #mainContent h5 + ol, #mainContent h5 + ul { border-left: 4px solid var(--border-ejercicios); padding: 1rem 1rem 1rem 1.5rem; margin-top: 1.5rem; margin-bottom: 1.5rem; background-color: var(--bg-ejercicios); border-radius: 0.25rem; list-style-position: inside; } #mainContentPreview h5 + ol > li, #mainContentPreview h5 + ul > li, #mainContent h5 + ol > li, #mainContent h5 + ul > li { margin-bottom: 0.5rem; } #mainContentPreview h5 + ol > li strong, #mainContentPreview h5 + ul > li strong, #mainContent h5 + ol > li strong, #mainContent h5 + ul > li strong { color: var(--border-ejercicios); }
        #mainContentPreview blockquote, #mainContent blockquote { padding: 0.5rem 1rem; margin: 0 0 1rem; font-size: 1rem; border-left: 0.25rem solid #e9ecef; color: #6c757d; } #mainContentPreview blockquote p, #mainContent blockquote p { margin-bottom: 0; }
        #mainContentPreview img, #mainContent img { max-width: 100%; height: auto; margin-top: 1rem; margin-bottom: 1rem; border-radius: 0.25rem; display: block; }
        #mainContentPreview table, #mainContent table { width: 100%; margin-bottom: 1rem; color: var(--text-color); border-collapse: collapse; border: 1px solid #dee2e6; font-size: 0.9rem; }
        #mainContentPreview table th, #mainContent table td, #mainContent table th, #mainContent table td { padding: 0.75rem; vertical-align: top; border: 1px solid #dee2e6; }
        /* Estilo Default (Light) para thead th */
        #mainContentPreview table thead th,
        #mainContent table thead th {
            vertical-align: bottom;
            border-bottom: 2px solid #dee2e6;
            background-color: #f8f9fa;
            color: inherit;
            font-weight: bold;
        }
        /* Estilo Específico para Dark Theme */
        [data-bs-theme="dark"] #mainContentPreview table thead th,
        [data-bs-theme="dark"] #mainContent table thead th {
            background-color: var(--bg-pre, #212529);
            color: var(--text-color, #f8f9fa);
            border-color: color-mix(in srgb, var(--text-color, #dee2e6) 30%, transparent);
        }
        #mainContentPreview table tbody tr:nth-of-type(odd), #mainContent table tbody tr:nth-of-type(odd) { background-color: rgba(0, 0, 0, 0.03); }
        .accordion { margin-bottom: 1rem; }
        .accordion-item { margin-bottom: 0.5rem; border: 1px solid rgba(0,0,0,.125); border-radius: 0.25rem; background-color: var(--body-bg-color); }
        .accordion-header button { font-weight: 500; color: var(--color-h3); background-color: var(--bg-indice-link-hover); }
        .accordion-button:not(.collapsed) { color: var(--color-h3); background-color: var(--bg-indice-link-active); }
        .accordion-button:focus { box-shadow: 0 0 0 0.25rem rgba(var(--bs-link-color-rgb),.25); }
        .accordion-body { padding: 1rem 1.25rem; color: var(--text-color); background-color: var(--body-bg-color);}
        .accordion-body > :last-child { margin-bottom: 0; }
        @media (max-width: 767.98px) { #indiceContenidoPreview, #indiceContenido { display: none; } #mainContentPreview, #mainContent { min-height: auto; } }
        /* === FIN ESTILOS UNIFICADOS === */
    </style>
</head>
<body class="app-interface">
    <div class="container-fluid">
        <h3 class="mt-3 mb-4">Generador Markdown a HTML</h3>
        <div class="mb-3"> <label for="markdownInput" class="form-label fw-bold">Introduce tu Markdown aquí:</label> <textarea class="form-control" id="markdownInput" rows="15"></textarea> </div>
        <div class="controls-container">
            <button id="generateBtn" class="btn btn-primary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise me-1" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/><path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/></svg>Generar/Actualizar HTML</button>
            <button id="downloadBtn" class="btn btn-success"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download me-1" viewBox="0 0 16 16"><path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/><path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/></svg>Descargar HTML</button>
            <button class="btn btn-secondary" type="button" data-bs-toggle="offcanvas" data-bs-target="#personalizationOffcanvas" aria-controls="personalizationOffcanvas"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-palette-fill me-1" viewBox="0 0 16 16"><path d="M12.433 10.07C14.133 10.585 16 11.15 16 8a8 8 0 1 0-15.032 3.17A5 5 0 0 1 8 15a4.91 4.91 0 0 1 1.68-.325zM11.5 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m-3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m4.5 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m-3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/></svg>Personalizar</button>
            <button id="insertAccordionBtn" class="btn btn-sm btn-outline-secondary" type="button" title="Insertar bloque de acordeón">
                <i class="bi bi-plus-lg"></i> Acordeón
            </button>
            <button id="insertImageBtn" class="btn btn-sm btn-outline-secondary" type="button" title="Insertar imagen desde archivo">
                <i class="bi bi-image"></i> Imagen
            </button>
            <label for="themeSelector" class="form-label visually-hidden">Seleccionar Tema</label>
            <select id="themeSelector" class="form-select form-select-sm ms-auto" aria-label="Seleccionar Tema"></select>
        </div>
        <section id="previewSection"> <h2 class="mb-3">Vista Previa</h2> <div id="htmlOutputBody" data-bs-spy="scroll" data-bs-target="#indiceContenidoPreview" data-bs-offset="100"> <div class="row"> <div class="col-md-4 col-lg-3 d-none d-md-block"> <nav id="indiceContenidoPreview"><h5 class="mb-3">Índice</h5><nav class="nav nav-pills flex-column" id="indiceNavPreview"></nav></nav> </div> <div class="col-md-8 col-lg-9"> <main id="mainContentPreview"></main> </div> </div> </div> </section>
    </div>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="personalizationOffcanvas" aria-labelledby="personalizationOffcanvasLabel">
         <div class="offcanvas-header"> <h5 class="offcanvas-title" id="personalizationOffcanvasLabel">Personalizar Estilos</h5> <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button> </div>
        <div class="offcanvas-body"> <p>Ajusta los colores...</p> <h6>Contenido General</h6> <div class="row"> <div class="col-6"> <div class="form-group"><label for="colorH1">Color H1</label><input type="color" id="colorH1" class="form-control form-control-color" data-css-var="--color-h1"></div> <div class="form-group"><label for="colorH2">Color H2</label><input type="color" id="colorH2" class="form-control form-control-color" data-css-var="--color-h2"></div> <div class="form-group"><label for="colorH3">Color H3</label><input type="color" id="colorH3" class="form-control form-control-color" data-css-var="--color-h3"></div> <div class="form-group"><label for="colorH4">Color H4</label><input type="color" id="colorH4" class="form-control form-control-color" data-css-var="--color-h4"></div> <div class="form-group"><label for="colorH5">Color H5</label><input type="color" id="colorH5" class="form-control form-control-color" data-css-var="--color-h5"></div> <div class="form-group"><label for="colorH6">Color H6</label><input type="color" id="colorH6" class="form-control form-control-color" data-css-var="--color-h6"></div> </div> <div class="col-6"> <div class="form-group"><label for="linkColor">Enlaces</label><input type="color" id="linkColor" class="form-control form-control-color" data-css-var="--link-color"></div> <div class="form-group"><label for="textColor">Texto</label><input type="color" id="textColor" class="form-control form-control-color" data-css-var="--text-color"></div> <div class="form-group"><label for="colorCode">Código</label><input type="color" id="colorCode" class="form-control form-control-color" data-css-var="--color-code"></div> <div class="form-group"><label for="bgPre">Fondo Bloque Código</label><input type="color" id="bgPre" class="form-control form-control-color" data-css-var="--bg-pre"></div> <div class="form-group"><label for="bgCodeInline">Fondo Código Inline</label><input type="color" id="bgCodeInline" class="form-control form-control-color" data-css-var="--bg-code-inline"></div> <div class="form-group"><label for="bodyBgColor">Fondo Página</label><input type="color" id="bodyBgColor" class="form-control form-control-color" data-css-var="--body-bg-color"></div> </div> </div> <hr> <h6>Índice</h6> <div class="row"> <div class="col-6"> <div class="form-group"><label for="bgIndice">Fondo</label><input type="color" id="bgIndice" class="form-control form-control-color" data-css-var="--bg-indice"></div> <div class="form-group"><label for="colorIndiceLink">Texto Link</label><input type="color" id="colorIndiceLink" class="form-control form-control-color" data-css-var="--color-indice-link"></div> <div class="form-group"><label for="bgIndiceLinkHover">Fondo Hover</label><input type="color" id="bgIndiceLinkHover" class="form-control form-control-color" data-css-var="--bg-indice-link-hover"></div> </div> <div class="col-6"> <div class="form-group"><label for="colorIndiceLinkHover">Texto Hover</label><input type="color" id="colorIndiceLinkHover" class="form-control form-control-color" data-css-var="--color-indice-link-hover"></div> <div class="form-group"><label for="colorIndiceLinkActive">Texto Activo</label><input type="color" id="colorIndiceLinkActive" class="form-control form-control-color" data-css-var="--color-indice-link-active"></div> <div class="form-group"><label for="bgIndiceLinkActive">Fondo Activo</label><input type="color" id="bgIndiceLinkActive" class="form-control form-control-color" data-css-var="--bg-indice-link-active"></div> </div> </div> <div class="alert alert-info mt-3 small" role="alert">Los cambios de color se aplican en tiempo real.</div> </div>
    </div>

    <input type="file" id="imageFileInput" accept="image/*" hidden>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.11/dist/purify.min.js"></script>
    <script>
        const SCROLL_OFFSET_PREVIEW = 100; const SCROLL_OFFSET_DOWNLOAD = 70;
        const markdownInput = document.getElementById('markdownInput');
        const generateBtn = document.getElementById('generateBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const insertAccordionBtn = document.getElementById('insertAccordionBtn');
        const insertImageBtn = document.getElementById('insertImageBtn');
        const imageFileInput = document.getElementById('imageFileInput');
        const mainContentPreview = document.getElementById('mainContentPreview');
        const indiceNavPreview = document.getElementById('indiceNavPreview');
        const htmlOutputBody = document.getElementById('htmlOutputBody');
        const personalizationInputs = document.querySelectorAll('#personalizationOffcanvas input[type="color"]');
        const indiceContenidoPreviewContainer = document.getElementById('indiceContenidoPreview');
        const themeSelector = document.getElementById('themeSelector');
        let scrollSpyInstance = null;
        
        let accordionContentPlaceholders = {};
        let imageStore = {}; // Objeto para almacenar Base64 de imágenes { 'img-id-123': 'data:image/png;base64,...' }
        let imageIdCounter = 0; // Para generar IDs únicos para las imágenes


const defaultCssVariables = {
    '--color-h1': '#2c3e50', '--color-h2': '#3498db', '--color-h3': '#7f8c8d', '--color-h4': '#95a5a6', '--color-h5': '#1abc9c', '--color-h6': '#bdc3c7',
    '--color-code': '#e74c3c', '--bg-pre': '#ecf0f1', '--bg-code-inline': '#f9fbfd',
    '--bg-indice': '#f8f9fa', '--color-indice-link': '#2980b9', '--color-indice-link-hover': '#1f618d', '--bg-indice-link-hover': '#eaf2f8',
    '--color-indice-link-active': '#154360', '--bg-indice-link-active': '#d4e6f1',
    '--border-ejercicios': '#3498db', '--bg-ejercicios': '#e8f6fd',
    '--body-bg-color': '#ffffff', '--text-color': '#34495e', '--link-color': '#3498db',
    '--copy-btn-bg': '#95a5a6', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#7f8c8d', '--copy-btn-success-bg': '#2ecc71'
};

const themes = [
     { name: "Claro Fundacional", variables: { ...defaultCssVariables }},
     { name: "Crema Elegante", variables: { '--color-h1': '#A0AEC0', '--color-h2': '#718096', '--color-h3': '#4A5568', '--color-h4': '#A0AEC0', '--color-h5': '#718096', '--color-h6': '#CBD5E0', '--color-code': '#DD6B20', '--bg-pre': '#F7FAFC', '--bg-code-inline': '#EDF2F7', '--bg-indice': '#EDF2F7', '--color-indice-link': '#4A5568', '--color-indice-link-hover': '#2D3748', '--bg-indice-link-hover': '#E2E8F0', '--color-indice-link-active': '#1A202C', '--bg-indice-link-active': '#CBD5E0', '--border-ejercicios': '#A0AEC0', '--bg-ejercicios': '#F7FAFC', '--body-bg-color': '#ffffff', '--text-color': '#2D3748', '--link-color': '#718096', '--copy-btn-bg': '#A0AEC0', '--copy-btn-color': '#1A202C', '--copy-btn-hover-bg': '#718096', '--copy-btn-success-bg': '#68D391' }},
     { name: "Serenidad Mineral", variables: { '--color-h1': '#52525b', '--color-h2': '#71717a', '--color-h3': '#a1a1aa', '--color-h4': '#d4d4d8', '--color-h5': '#71717a', '--color-h6': '#a1a1aa', '--color-code': '#0ea5e9', '--bg-pre': '#f4f4f5', '--bg-code-inline': '#eef2ff', '--bg-indice': '#e4e4e7', '--color-indice-link': '#52525b', '--color-indice-link-hover': '#18181b', '--bg-indice-link-hover': '#d4d4d8', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#52525b', '--border-ejercicios': '#a1a1aa', '--bg-ejercicios': '#f4f4f5', '--body-bg-color': '#fafafa', '--text-color': '#27272a', '--link-color': '#71717a', '--copy-btn-bg': '#a1a1aa', '--copy-btn-color': '#18181b', '--copy-btn-hover-bg': '#71717a', '--copy-btn-success-bg': '#86efac' }},
     { name: "Eco Vibrante", variables: { '--color-h1': '#166534', '--color-h2': '#15803d', '--color-h3': '#65a30d', '--color-h4': '#a3e635', '--color-h5': '#4d7c0f', '--color-h6': '#84cc16', '--color-code': '#be123c', '--bg-pre': '#f0fdf4', '--bg-code-inline': '#f7fee7', '--bg-indice': '#ecfccb', '--color-indice-link': '#166534', '--color-indice-link-hover': '#052e16', '--bg-indice-link-hover': '#d9f99d', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#166534', '--border-ejercicios': '#84cc16', '--bg-ejercicios': '#f0fdf4', '--body-bg-color': '#ffffff', '--text-color': '#14532d', '--link-color': '#15803d', '--copy-btn-bg': '#65a30d', '--copy-btn-color': '#f0fdf4', '--copy-btn-hover-bg': '#4d7c0f', '--copy-btn-success-bg': '#a3e635' }},
     { name: "Chispa de Caramelo", variables: { '--color-h1': '#d60270', '--color-h2': '#990099', '--color-h3': '#7000c4', '--color-h4': '#0099cc', '--color-h5': '#eb5000', '--color-h6': '#7000c4', '--color-code': '#009933', '--bg-pre': '#fff0f7', '--bg-code-inline': '#f5f0ff', '--bg-indice': '#ffeeff', '--color-indice-link': '#990099', '--color-indice-link-hover': '#ffffff', '--bg-indice-link-hover': '#d60270', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#7000c4', '--border-ejercicios': '#0099cc', '--bg-ejercicios': '#f0faff', '--body-bg-color': '#ffffff', '--text-color': '#333333', '--link-color': '#d60270', '--copy-btn-bg': '#990099', '--copy-btn-color': 'white', '--copy-btn-hover-bg': '#d60270', '--copy-btn-success-bg': '#0099cc' }},
     { name: "Aqua Fresca", variables: { '--color-h1': '#06b6d4', '--color-h2': '#0891b2', '--color-h3': '#0e7490', '--color-h4': '#ef4444', '--color-h5': '#f97316', '--color-h6': '#0e7490', '--color-code': '#db2777', '--bg-pre': '#ecfeff', '--bg-code-inline': '#f0f9ff', '--bg-indice': '#e0f2fe', '--color-indice-link': '#0891b2', '--color-indice-link-hover': '#0e7490', '--bg-indice-link-hover': '#cffafe', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#06b6d4', '--border-ejercicios': '#06b6d4', '--bg-ejercicios': '#ecfeff', '--body-bg-color': '#ffffff', '--text-color': '#0f172a', '--link-color': '#0891b2', '--copy-btn-bg': '#ef4444', '--copy-btn-color': 'white', '--copy-btn-hover-bg': '#dc2626', '--copy-btn-success-bg': '#06b6d4' }},
     { name: "Dorado Académico", variables: { '--color-h1': '#ca8a04', '--color-h2': '#a16207', '--color-h3': '#78350f', '--color-h4': '#facc15', '--color-h5': '#422006', '--color-h6': '#78350f', '--color-code': '#0369a1', '--bg-pre': '#fefce8', '--bg-code-inline': '#fffbeb', '--bg-indice': '#fef9c3', '--color-indice-link': '#78350f', '--color-indice-link-hover': '#422006', '--bg-indice-link-hover': '#fde68a', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#a16207', '--border-ejercicios': '#facc15', '--bg-ejercicios': '#fefce8', '--body-bg-color': '#ffffff', '--text-color': '#3f3015', '--link-color': '#a16207', '--copy-btn-bg': '#ca8a04', '--copy-btn-color': '#fefce8', '--copy-btn-hover-bg': '#a16207', '--copy-btn-success-bg': '#facc15' }},
     { name: "Acero Urbano (Oscuro)", variables: { '--color-h1': '#d1d5db', '--color-h2': '#9ca3af', '--color-h3': '#6b7280', '--color-h4': '#4b5563', '--color-h5': '#374151', '--color-h6': '#9ca3af', '--color-code': '#38bdf8', '--bg-pre': '#1f2937', '--bg-code-inline': '#374151', '--bg-indice': '#111827', '--color-indice-link': '#9ca3af', '--color-indice-link-hover': '#e5e7eb', '--bg-indice-link-hover': '#374151', '--color-indice-link-active': '#38bdf8', '--bg-indice-link-active': '#1f2937', '--border-ejercicios': '#6b7280', '--bg-ejercicios': '#1f2937', '--body-bg-color': '#0f172a', '--text-color': '#f3f4f6', '--link-color': '#9ca3af', '--copy-btn-bg': '#4b5563', '--copy-btn-color': '#f3f4f6', '--copy-btn-hover-bg': '#374151', '--copy-btn-success-bg': '#38bdf8' }},
     { name: "Sotobosque Profundo (Oscuro)", variables: { '--color-h1': '#bbf7d0', '--color-h2': '#86efac', '--color-h3': '#4ade80', '--color-h4': '#22c55e', '--color-h5': '#16a34a', '--color-h6': '#15803d', '--color-code': '#fcd34d', '--bg-pre': '#062813', '--bg-code-inline': '#073b1b', '--bg-indice': '#04180c', '--color-indice-link': '#86efac', '--color-indice-link-hover': '#bbf7d0', '--bg-indice-link-hover': '#073b1b', '--color-indice-link-active': '#fcd34d', '--bg-indice-link-active': '#062813', '--border-ejercicios': '#22c55e', '--bg-ejercicios': '#062813', '--body-bg-color': '#020e06', '--text-color': '#dcfce7', '--link-color': '#4ade80', '--copy-btn-bg': '#16a34a', '--copy-btn-color': '#dcfce7', '--copy-btn-hover-bg': '#15803d', '--copy-btn-success-bg': '#86efac' }},
     { name: "Abisal Sereno", variables: { '--color-h1': '#0077b6', '--color-h2': '#0096c7', '--color-h3': '#023e8a', '--color-h4': '#48cae4', '--color-h5': '#90e0ef', '--color-h6': '#ade8f4', '--color-code': '#fb8500', '--bg-pre': '#e0fbfc', '--bg-code-inline': '#e7feff', '--bg-indice': '#caf0f8', '--color-indice-link': '#0077b6', '--color-indice-link-hover': '#023e8a', '--bg-indice-link-hover': '#90e0ef', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#0096c7', '--border-ejercicios': '#48cae4', '--bg-ejercicios': '#e0fbfc', '--body-bg-color': '#ffffff', '--text-color': '#023047', '--link-color': '#0077b6', '--copy-btn-bg': '#0077b6', '--copy-btn-color': 'white', '--copy-btn-hover-bg': '#0096c7', '--copy-btn-success-bg': '#219ebc' }},
     { name: "Neón Eléctrico (Oscuro)", variables: { '--color-h1': '#ff00ff', '--color-h2': '#00ffff', '--color-h3': '#ffff00', '--color-h4': '#ff7f00', '--color-h5': '#7fff00', '--color-h6': '#ff00ff', '--color-code': '#ffffff', '--bg-pre': '#1a1a1a', '--bg-code-inline': '#2c2c2c', '--bg-indice': '#101010', '--color-indice-link': '#00ffff', '--color-indice-link-hover': '#ffff00', '--bg-indice-link-hover': '#2c2c2c', '--color-indice-link-active': '#101010', '--bg-indice-link-active': '#ff00ff', '--border-ejercicios': '#ffff00', '--bg-ejercicios': '#1a1a1a', '--body-bg-color': '#000000', '--text-color': '#e0e0e0', '--link-color': '#ff00ff', '--copy-btn-bg': '#00ffff', '--copy-btn-color': '#000000', '--copy-btn-hover-bg': '#ffff00', '--copy-btn-success-bg': '#7fff00' }},
     { name: "Tostado Artesanal", variables: { '--color-h1': '#7f5539', '--color-h2': '#9c6644', '--color-h3': '#b08968', '--color-h4': '#ddb892', '--color-h5': '#e6ccb2', '--color-h6': '#ede0d4', '--color-code': '#4a4033', '--bg-pre': '#fdfcfb', '--bg-code-inline': '#fffaf5', '--bg-indice': '#f8f1e9', '--color-indice-link': '#7f5539', '--color-indice-link-hover': '#543a26', '--bg-indice-link-hover': '#e6ccb2', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#7f5539', '--border-ejercicios': '#b08968', '--bg-ejercicios': '#fdfcfb', '--body-bg-color': '#ffffff', '--text-color': '#543a26', '--link-color': '#9c6644', '--copy-btn-bg': '#b08968', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#9c6644', '--copy-btn-success-bg': '#a3b18a' }},
     { name: "Hierbabuena Refrescante", variables: { '--color-h1': '#10b981', '--color-h2': '#059669', '--color-h3': '#34d399', '--color-h4': '#a7f3d0', '--color-h5': '#f59e0b', '--color-h6': '#6ee7b7', '--color-code': '#d946ef', '--bg-pre': '#f0fdfa', '--bg-code-inline': '#e6fcf5', '--bg-indice': '#d1fae5', '--color-indice-link': '#059669', '--color-indice-link-hover': '#047857', '--bg-indice-link-hover': '#a7f3d0', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#10b981', '--border-ejercicios': '#34d399', '--bg-ejercicios': '#f0fdfa', '--body-bg-color': '#ffffff', '--text-color': '#064e3b', '--link-color': '#10b981', '--copy-btn-bg': '#059669', '--copy-btn-color': '#f0fdfa', '--copy-btn-hover-bg': '#10b981', '--copy-btn-success-bg': '#f59e0b' }},
     { name: "Nebulosa Amatista (Oscuro)", variables: { '--color-h1': '#c084fc', '--color-h2': '#a855f7', '--color-h3': '#9333ea', '--color-h4': '#e879f9', '--color-h5': '#f472b6', '--color-h6': '#d946ef', '--color-code': '#fde047', '--bg-pre': '#2e1040', '--bg-code-inline': '#3b0764', '--bg-indice': '#1e072b', '--color-indice-link': '#c084fc', '--color-indice-link-hover': '#e9d5ff', '--bg-indice-link-hover': '#3b0764', '--color-indice-link-active': '#fde047', '--bg-indice-link-active': '#2e1040', '--border-ejercicios': '#a855f7', '--bg-ejercicios': '#2e1040', '--body-bg-color': '#190526', '--text-color': '#f3e8ff', '--link-color': '#c084fc', '--copy-btn-bg': '#9333ea', '--copy-btn-color': '#f3e8ff', '--copy-btn-hover-bg': '#a855f7', '--copy-btn-success-bg': '#e879f9' }},
     { name: "Circuito Integrado", variables: { '--color-h1': '#0ea5e9', '--color-h2': '#0284c7', '--color-h3': '#0369a1', '--color-h4': '#7dd3fc', '--color-h5': '#e0f2fe', '--color-h6': '#0ea5e9', '--color-code': '#f43f5e', '--bg-pre': '#f0f9ff', '--bg-code-inline': '#e0f2fe', '--bg-indice': '#e0f2fe', '--color-indice-link': '#0284c7', '--color-indice-link-hover': '#0369a1', '--bg-indice-link-hover': '#bae6fd', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#0ea5e9', '--border-ejercicios': '#7dd3fc', '--bg-ejercicios': '#f0f9ff', '--body-bg-color': '#ffffff', '--text-color': '#0c4a6e', '--link-color': '#0ea5e9', '--copy-btn-bg': '#0284c7', '--copy-btn-color': 'white', '--copy-btn-hover-bg': '#0369a1', '--copy-btn-success-bg': '#38bdf8' }},
     { name: "Lienzo Natural", variables: { '--color-h1': '#a37d48', '--color-h2': '#bfa071', '--color-h3': '#d9c19e', '--color-h4': '#f5eadc', '--color-h5': '#a37d48', '--color-h6': '#bfa071', '--color-code': '#57534e', '--bg-pre': '#fefbf6', '--bg-code-inline': '#fdf8f0', '--bg-indice': '#f5eadc', '--color-indice-link': '#a37d48', '--color-indice-link-hover': '#785c34', '--bg-indice-link-hover': '#eaddc9', '--color-indice-link-active': '#44403c', '--bg-indice-link-active': '#bfa071', '--border-ejercicios': '#d9c19e', '--bg-ejercicios': '#fefbf6', '--body-bg-color': '#ffffff', '--text-color': '#44403c', '--link-color': '#a37d48', '--copy-btn-bg': '#bfa071', '--copy-btn-color': '#44403c', '--copy-btn-hover-bg': '#a37d48', '--copy-btn-success-bg': '#d9c19e' }},
     { name: "Algodón de Azúcar", variables: { '--color-h1': '#fecdd3', '--color-h2': '#fbcfe8', '--color-h3': '#e9d5ff', '--color-h4': '#d9f99d', '--color-h5': '#bfdbfe', '--color-h6': '#a7f3d0', '--color-code': '#7c3aed', '--bg-pre': '#fff1f2', '--bg-code-inline': '#fdf4ff', '--bg-indice': '#fdf4ff', '--color-indice-link': '#f472b6', '--color-indice-link-hover': '#db2777', '--bg-indice-link-hover': '#fce7f3', '--color-indice-link-active': '#581c87', '--bg-indice-link-active': '#fecdd3', '--border-ejercicios': '#a7f3d0', '--bg-ejercicios': '#f0fdfa', '--body-bg-color': '#ffffff', '--text-color': '#52525b', '--link-color': '#f472b6', '--copy-btn-bg': '#bfdbfe', '--copy-btn-color': '#1e3a8a', '--copy-btn-hover-bg': '#93c5fd', '--copy-btn-success-bg': '#d9f99d' }},
     { name: "Hormigón Pulido", variables: { '--color-h1': '#404040', '--color-h2': '#525252', '--color-h3': '#737373', '--color-h4': '#a3a3a3', '--color-h5': '#d4d4d4', '--color-h6': '#a3a3a3', '--color-code': '#ea580c', '--bg-pre': '#f5f5f5', '--bg-code-inline': '#fafafa', '--bg-indice': '#e5e5e5', '--color-indice-link': '#525252', '--color-indice-link-hover': '#171717', '--bg-indice-link-hover': '#d4d4d4', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#404040', '--border-ejercicios': '#a3a3a3', '--bg-ejercicios': '#f5f5f5', '--body-bg-color': '#ffffff', '--text-color': '#262626', '--link-color': '#737373', '--copy-btn-bg': '#a3a3a3', '--copy-btn-color': '#171717', '--copy-btn-hover-bg': '#737373', '--copy-btn-success-bg': '#84cc16' }},
     { name: "Granate Intenso", variables: { '--color-h1': '#881337', '--color-h2': '#be185d', '--color-h3': '#fecaca', '--color-h4': '#1e3a8a', '--color-h5': '#60a5fa', '--color-h6': '#881337', '--color-code': '#1e3a8a', '--bg-pre': '#fff1f2', '--bg-code-inline': '#fee2e2', '--bg-indice': '#fecaca', '--color-indice-link': '#be185d', '--color-indice-link-hover': '#ffffff', '--bg-indice-link-hover': '#881337', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#be185d', '--border-ejercicios': '#60a5fa', '--bg-ejercicios': '#eff6ff', '--body-bg-color': '#ffffff', '--text-color': '#4c0519', '--link-color': '#881337', '--copy-btn-bg': '#be185d', '--copy-btn-color': 'white', '--copy-btn-hover-bg': '#881337', '--copy-btn-success-bg': '#60a5fa' }},
     { name: "Arcilla Seca", variables: { '--color-h1': '#704214', '--color-h2': '#8c5a2b', '--color-h3': '#a97c50', '--color-h4': '#c5a784', '--color-h5': '#e0d1bf', '--color-h6': '#a97c50', '--color-code': '#047857', '--bg-pre': '#fdf8f2', '--bg-code-inline': '#fefcf9', '--bg-indice': '#fef3e5', '--color-indice-link': '#704214', '--color-indice-link-hover': '#452a0e', '--bg-indice-link-hover': '#e0d1bf', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#704214', '--border-ejercicios': '#c5a784', '--bg-ejercicios': '#fdf8f2', '--body-bg-color': '#ffffff', '--text-color': '#452a0e', '--link-color': '#8c5a2b', '--copy-btn-bg': '#a97c50', '--copy-btn-color': '#fdf8f2', '--copy-btn-hover-bg': '#8c5a2b', '--copy-btn-success-bg': '#c5a784' }},
     { name: "Brisa de Lavanda", variables: { '--color-h1': '#8b5cf6', '--color-h2': '#a78bfa', '--color-h3': '#c4b5fd', '--color-h4': '#ddd6fe', '--color-h5': '#ede9fe', '--color-h6': '#a78bfa', '--color-code': '#16a34a', '--bg-pre': '#f5f3ff', '--bg-code-inline': '#fafaff', '--bg-indice': '#ede9fe', '--color-indice-link': '#8b5cf6', '--color-indice-link-hover': '#6d28d9', '--bg-indice-link-hover': '#ddd6fe', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#8b5cf6', '--border-ejercicios': '#c4b5fd', '--bg-ejercicios': '#f5f3ff', '--body-bg-color': '#ffffff', '--text-color': '#4c1d95', '--link-color': '#8b5cf6', '--copy-btn-bg': '#a78bfa', '--copy-btn-color': '#f5f3ff', '--copy-btn-hover-bg': '#8b5cf6', '--copy-btn-success-bg': '#c4b5fd' }},
     { name: "Medianoche Carmesí (Oscuro)", variables: { '--color-h1': '#fca5a5', '--color-h2': '#f87171', '--color-h3': '#ef4444', '--color-h4': '#dc2626', '--color-h5': '#b91c1c', '--color-h6': '#991b1b', '--color-code': '#60a5fa', '--bg-pre': '#1e1b1b', '--bg-code-inline': '#2c1d1d', '--bg-indice': '#1c1010', '--color-indice-link': '#f87171', '--color-indice-link-hover': '#fca5a5', '--bg-indice-link-hover': '#2c1d1d', '--color-indice-link-active': '#1c1010', '--bg-indice-link-active': '#ef4444', '--border-ejercicios': '#ef4444', '--bg-ejercicios': '#1e1b1b', '--body-bg-color': '#0f0a0a', '--text-color': '#fee2e2', '--link-color': '#f87171', '--copy-btn-bg': '#dc2626', '--copy-btn-color': '#fee2e2', '--copy-btn-hover-bg': '#b91c1c', '--copy-btn-success-bg': '#f87171' }},
     { name: "Oasis Desértico", variables: { '--color-h1': '#c27803', '--color-h2': '#d97706', '--color-h3': '#f59e0b', '--color-h4': '#fcd34d', '--color-h5': '#fef3c7', '--color-h6': '#fbbf24', '--color-code': '#059669', '--bg-pre': '#fffbeb', '--bg-code-inline': '#fefce8', '--bg-indice': '#fef3c7', '--color-indice-link': '#d97706', '--color-indice-link-hover': '#b45309', '--bg-indice-link-hover': '#fde68a', '--color-indice-link-active': '#78350f', '--bg-indice-link-active': '#fcd34d', '--border-ejercicios': '#f59e0b', '--bg-ejercicios': '#fffbeb', '--body-bg-color': '#ffffff', '--text-color': '#713f12', '--link-color': '#d97706', '--copy-btn-bg': '#f59e0b', '--copy-btn-color': '#713f12', '--copy-btn-hover-bg': '#d97706', '--copy-btn-success-bg': '#a3e635' }},
     { name: "Ciberpunk Nocturno (Oscuro)", variables: { '--color-h1': '#ec4899', '--color-h2': '#a855f7', '--color-h3': '#0ea5e9', '--color-h4': '#34d399', '--color-h5': '#facc15', '--color-h6': '#ec4899', '--color-code': '#ffffff', '--bg-pre': '#1a001a', '--bg-code-inline': '#260026', '--bg-indice': '#0d000d', '--color-indice-link': '#a855f7', '--color-indice-link-hover': '#ec4899', '--bg-indice-link-hover': '#260026', '--color-indice-link-active': '#0d000d', '--bg-indice-link-active': '#0ea5e9', '--border-ejercicios': '#0ea5e9', '--bg-ejercicios': '#1a001a', '--body-bg-color': '#000000', '--text-color': '#e0e0e0', '--link-color': '#ec4899', '--copy-btn-bg': '#a855f7', '--copy-btn-color': '#000000', '--copy-btn-hover-bg': '#0ea5e9', '--copy-btn-success-bg': '#34d399' }},
     { name: "Marfil Clásico", variables: { '--color-h1': '#4a4a4a', '--color-h2': '#666666', '--color-h3': '#888888', '--color-h4': '#aaaaaa', '--color-h5': '#cccccc', '--color-h6': '#dddddd', '--color-code': '#d62728', '--bg-pre': '#fcfcfc', '--bg-code-inline': '#f8f8f8', '--bg-indice': '#f5f5f5', '--color-indice-link': '#556b2f', '--color-indice-link-hover': '#3a4b20', '--bg-indice-link-hover': '#e0e0e0', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#556b2f', '--border-ejercicios': '#aaaaaa', '--bg-ejercicios': '#fcfcfc', '--body-bg-color': '#fffff0', '--text-color': '#333333', '--link-color': '#556b2f', '--copy-btn-bg': '#888888', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#666666', '--copy-btn-success-bg': '#2ca02c' }},
     { name: "Azul Pálido", variables: { '--color-h1': '#1f497d', '--color-h2': '#3c64a5', '--color-h3': '#6c8dc3', '--color-h4': '#a7bfde', '--color-h5': '#d3e5f8', '--color-h6': '#eaf2f8', '--color-code': '#c50f1f', '--bg-pre': '#f0f8ff', '--bg-code-inline': '#eef7ff', '--bg-indice': '#e1f5fe', '--color-indice-link': '#1f497d', '--color-indice-link-hover': '#143258', '--bg-indice-link-hover': '#bddbf7', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#1f497d', '--border-ejercicios': '#a7bfde', '--bg-ejercicios': '#f0f8ff', '--body-bg-color': '#ffffff', '--text-color': '#212121', '--link-color': '#1f497d', '--copy-btn-bg': '#3c64a5', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#1f497d', '--copy-btn-success-bg': '#3cb44a' }},
     { name: "Verde Menta", variables: { '--color-h1': '#005d4a', '--color-h2': '#00796b', '--color-h3': '#009688', '--color-h4': '#4db6ac', '--color-h5': '#80cbc4', '--color-h6': '#b2dfdb', '--color-code': '#d32f2f', '--bg-pre': '#e0f2f1', '--bg-code-inline': '#e7fcf9', '--bg-indice': '#ccf0ec', '--color-indice-link': '#00796b', '--color-indice-link-hover': '#004d40', '--bg-indice-link-hover': '#a7d9d3', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#005d4a', '--border-ejercicios': '#80cbc4', '--bg-ejercicios': '#e0f2f1', '--body-bg-color': '#ffffff', '--text-color': '#263238', '--link-color': '#00796b', '--copy-btn-bg': '#009688', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#00796b', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Rosa Suave", variables: { '--color-h1': '#880e4f', '--color-h2': '#c2185b', '--color-h3': '#e91e63', '--color-h4': '#f06292', '--color-h5': '#f48fb1', '--color-h6': '#f8bbd0', '--color-code': '#1565c0', '--bg-pre': '#fce4ec', '--bg-code-inline': '#f8e9ed', '--bg-indice': '#f8bbd0', '--color-indice-link': '#c2185b', '--color-indice-link-hover': '#880e4f', '--bg-indice-link-hover': '#f48fb1', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#c2185b', '--border-ejercicios': '#f06292', '--bg-ejercicios': '#fce4ec', '--body-bg-color': '#ffffff', '--text-color': '#4e342e', '--link-color': '#c2185b', '--copy-btn-bg': '#e91e63', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#c2185b', '--copy-btn-success-bg': '#4caf50' }},
     { name: "Amarillo Crema", variables: { '--color-h1': '#ff8f00', '--color-h2': '#ffa000', '--color-h3': '#ffb300', '--color-h4': '#ffca28', '--color-h5': '#ffe082', '--color-h6': '#ffecb3', '--color-code': '#512da8', '--bg-pre': '#fffde7', '--bg-code-inline': '#fff9c4', '--bg-indice': '#fffbe0', '--color-indice-link': '#ff8f00', '--color-indice-link-hover': '#f57f17', '--bg-indice-link-hover': '#ffecb3', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#ff8f00', '--border-ejercicios': '#ffca28', '--bg-ejercicios': '#fffde7', '--body-bg-color': '#ffffff', '--text-color': '#424242', '--link-color': '#ff8f00', '--copy-btn-bg': '#ffb300', '--copy-btn-color': '#424242', '--copy-btn-hover-bg': '#ffa000', '--copy-btn-success-bg': '#00c853' }},
     { name: "Lila Delicado", variables: { '--color-h1': '#4527a0', '--color-h2': '#5e35b1', '--color-h3': '#7e57c2', '--color-h4': '#9575cd', '--color-h5': '#b39ddb', '--color-h6': '#d1c4e9', '--color-code': '#ef5350', '--bg-pre': '#ede7f6', '--bg-code-inline': '#f3e5f5', '--bg-indice': '#e1bee7', '--color-indice-link': '#5e35b1', '--color-indice-link-hover': '#4527a0', '--bg-indice-link-hover': '#ce93d8', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#5e35b1', '--border-ejercicios': '#b39ddb', '--bg-ejercicios': '#ede7f6', '--body-bg-color': '#ffffff', '--text-color': '#4a148c', '--link-color': '#5e35b1', '--copy-btn-bg': '#7e57c2', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#5e35b1', '--copy-btn-success-bg': '#66bb6a' }},
     { name: "Gris Cálido", variables: { '--color-h1': '#3e2723', '--color-h2': '#5d4037', '--color-h3': '#795548', '--color-h4': '#a1887f', '--color-h5': '#bcaaa4', '--color-h6': '#d7ccc8', '--color-code': '#039be5', '--bg-pre': '#efebe9', '--bg-code-inline': '#f5f5f5', '--bg-indice': '#e0e0e0', '--color-indice-link': '#5d4037', '--color-indice-link-hover': '#3e2723', '--bg-indice-link-hover': '#cccccc', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#5d4037', '--border-ejercicios': '#a1887f', '--bg-ejercicios': '#efebe9', '--body-bg-color': '#ffffff', '--text-color': '#4e342e', '--link-color': '#5d4037', '--copy-btn-bg': '#795548', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#5d4037', '--copy-btn-success-bg': '#ffb300' }},
     { name: "Celeste Sereno", variables: { '--color-h1': '#01579b', '--color-h2': '#0277bd', '--color-h3': '#0288d1', '--color-h4': '#03a9f4', '--color-h5': '#4fc3f7', '--color-h6': '#81d4fa', '--color-code': '#e53935', '--bg-pre': '#e1f5fe', '--bg-code-inline': '#e0f2f7', '--bg-indice': '#b3e5fc', '--color-indice-link': '#0277bd', '--color-indice-link-hover': '#01579b', '--bg-indice-link-hover': '#4fc3f7', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#0277bd', '--border-ejercicios': '#03a9f4', '--bg-ejercicios': '#e1f5fe', '--body-bg-color': '#ffffff', '--text-color': '#212121', '--link-color': '#0277bd', '--copy-btn-bg': '#0288d1', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#0277bd', '--copy-btn-success-bg': '#7cb342' }},
     { name: "Verde Oliva Claro", variables: { '--color-h1': '#33691e', '--color-h2': '#558b2f', '--color-h3': '#689f38', '--color-h4': '#8bc34a', '--color-h5': '#aed581', '--color-h6': '#c5e1a5', '--color-code': '#fbc02d', '--bg-pre': '#f1f8e9', '--bg-code-inline': '#e8f5e9', '--bg-indice': '#dcedc8', '--color-indice-link': '#558b2f', '--color-indice-link-hover': '#33691e', '--bg-indice-link-hover': '#c5e1a5', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#558b2f', '--border-ejercicios': '#8bc34a', '--bg-ejercicios': '#f1f8e9', '--body-bg-color': '#ffffff', '--text-color': '#333333', '--link-color': '#558b2f', '--copy-btn-bg': '#689f38', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#558b2f', '--copy-btn-success-bg': '#ffb300' }},
     { name: "Naranja Melocotón", variables: { '--color-h1': '#e65100', '--color-h2': '#f57c00', '--color-h3': '#fb8c00', '--color-h4': '#ffb74d', '--color-h5': '#ffcc80', '--color-h6': '#ffe0b2', '--color-code': '#424242', '--bg-pre': '#fff3e0', '--bg-code-inline': '#ffe0b2', '--bg-indice': '#ffccbc', '--color-indice-link': '#e65100', '--color-indice-link-hover': '#bf360c', '--bg-indice-link-hover': '#ffab91', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#e65100', '--border-ejercicios': '#ffb74d', '--bg-ejercicios': '#fff3e0', '--body-bg-color': '#ffffff', '--text-color': '#424242', '--link-color': '#f57c00', '--copy-btn-bg': '#fb8c00', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#f57c00', '--copy-btn-success-bg': '#81c784' }},
     { name: "Índigo Claro", variables: { '--color-h1': '#1a237e', '--color-h2': '#303f9f', '--color-h3': '#3f51b5', '--color-h4': '#7986cb', '--color-h5': '#9fa8da', '--color-h6': '#c5cae9', '--color-code': '#f44336', '--bg-pre': '#e8eaf6', '--bg-code-inline': '#e0eafc', '--bg-indice': '#c5cae9', '--color-indice-link': '#3f51b5', '--color-indice-link-hover': '#1a237e', '--bg-indice-link-hover': '#9fa8da', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#3f51b5', '--border-ejercicios': '#7986cb', '--bg-ejercicios': '#e8eaf6', '--body-bg-color': '#ffffff', '--text-color': '#1a237e', '--link-color': '#3f51b5', '--copy-btn-bg': '#303f9f', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#1a237e', '--copy-btn-success-bg': '#4caf50' }},
     { name: "Turquesa Pálido", variables: { '--color-h1': '#006064', '--color-h2': '#00838f', '--color-h3': '#0097a7', '--color-h4': '#4dd0e1', '--color-h5': '#80deea', '--color-h6': '#b2ebf2', '--color-code': '#ef6c00', '--bg-pre': '#e0f7fa', '--bg-code-inline': '#e7fcfc', '--bg-indice': '#b2ebf2', '--color-indice-link': '#00838f', '--color-indice-link-hover': '#006064', '--bg-indice-link-hover': '#80deea', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#00838f', '--border-ejercicios': '#4dd0e1', '--bg-ejercicios': '#e0f7fa', '--body-bg-color': '#ffffff', '--text-color': '#263238', '--link-color': '#00838f', '--copy-btn-bg': '#0097a7', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#00838f', '--copy-btn-success-bg': '#66bb6a' }},
     { name: "Arena Suave", variables: { '--color-h1': '#a1887f', '--color-h2': '#bcaaa4', '--color-h3': '#d7ccc8', '--color-h4': '#e0e0e0', '--color-h5': '#eeeeee', '--color-h6': '#f5f5f5', '--color-code': '#f44336', '--bg-pre': '#fcfcfc', '--bg-code-inline': '#f5f5f5', '--bg-indice': '#eeeeee', '--color-indice-link': '#795548', '--color-indice-link-hover': '#5d4037', '--bg-indice-link-hover': '#d7ccc8', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#795548', '--border-ejercicios': '#d7ccc8', '--bg-ejercicios': '#fcfcfc', '--body-bg-color': '#fffaf0', '--text-color': '#4e342e', '--link-color': '#795548', '--copy-btn-bg': '#bcaaa4', '--copy-btn-color': '#4e342e', '--copy-btn-hover-bg': '#a1887f', '--copy-btn-success-bg': '#81c784' }},
     { name: "Coral Claro", variables: { '--color-h1': '#bf360c', '--color-h2': '#f4511e', '--color-h3': '#ff5722', '--color-h4': '#ff8a65', '--color-h5': '#ffab91', '--color-h6': '#ffccbc', '--color-code': '#00838f', '--bg-pre': '#fbe9e7', '--bg-code-inline': '#fff3e0', '--bg-indice': '#ffccbc', '--color-indice-link': '#f4511e', '--color-indice-link-hover': '#bf360c', '--bg-indice-link-hover': '#ffab91', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#f4511e', '--border-ejercicios': '#ff8a65', '--bg-ejercicios': '#fbe9e7', '--body-bg-color': '#ffffff', '--text-color': '#3e2723', '--link-color': '#f4511e', '--copy-btn-bg': '#ff5722', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#f4511e', '--copy-btn-success-bg': '#66bb6a' }},
     { name: "Violeta Pálido", variables: { '--color-h1': '#311b92', '--color-h2': '#4527a0', '--color-h3': '#5e35b1', '--color-h4': '#9575cd', '--color-h5': '#b39ddb', '--color-h6': '#d1c4e9', '--color-code': '#ffc107', '--bg-pre': '#f3e5f5', '--bg-code-inline': '#e1bee7', '--bg-indice': '#e1bee7', '--color-indice-link': '#4527a0', '--color-indice-link-hover': '#311b92', '--bg-indice-link-hover': '#ce93d8', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#4527a0', '--border-ejercicios': '#9575cd', '--bg-ejercicios': '#f3e5f5', '--body-bg-color': '#ffffff', '--text-color': '#311b92', '--link-color': '#4527a0', '--copy-btn-bg': '#5e35b1', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#4527a0', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Cian Claro", variables: { '--color-h1': '#006064', '--color-h2': '#00838f', '--color-h3': '#0097a7', '--color-h4': '#4dd0e1', '--color-h5': '#80deea', '--color-h6': '#b2ebf2', '--color-code': '#ff5252', '--bg-pre': '#e0f7fa', '--bg-code-inline': '#e0f7fa', '--bg-indice': '#b2ebf2', '--color-indice-link': '#00838f', '--color-indice-link-hover': '#006064', '--bg-indice-link-hover': '#80deea', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#00838f', '--border-ejercicios': '#4dd0e1', '--bg-ejercicios': '#e0f7fa', '--body-bg-color': '#ffffff', '--text-color': '#263238', '--link-color': '#00838f', '--copy-btn-bg': '#0097a7', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#00838f', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Ocre Claro", variables: { '--color-h1': '#ff6f00', '--color-h2': '#ff8f00', '--color-h3': '#ffa000', '--color-h4': '#ffc107', '--color-h5': '#ffeb3b', '--color-h6': '#fff59d', '--color-code': '#3f51b5', '--bg-pre': '#fffde7', '--bg-code-inline': '#fff8e1', '--bg-indice': '#ffecb3', '--color-indice-link': '#ff8f00', '--color-indice-link-hover': '#ff6f00', '--bg-indice-link-hover': '#ffe082', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#ff8f00', '--border-ejercicios': '#ffc107', '--bg-ejercicios': '#fffde7', '--body-bg-color': '#ffffff', '--text-color': '#212121', '--link-color': '#ff8f00', '--copy-btn-bg': '#ffa000', '--copy-btn-color': '#212121', '--copy-btn-hover-bg': '#ff8f00', '--copy-btn-success-bg': '#4caf50' }},
     { name: "Rosa Beige", variables: { '--color-h1': '#880e4f', '--color-h2': '#c2185b', '--color-h3': '#e91e63', '--color-h4': '#f06292', '--color-h5': '#f48fb1', '--color-h6': '#f8bbd0', '--color-code': '#4db6ac', '--bg-pre': '#fce4ec', '--bg-code-inline': '#fff0f7', '--bg-indice': '#f8bbd0', '--color-indice-link': '#c2185b', '--color-indice-link-hover': '#880e4f', '--bg-indice-link-hover': '#f48fb1', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#c2185b', '--border-ejercicios': '#f06292', '--bg-ejercicios': '#fce4ec', '--body-bg-color': '#fffafa', '--text-color': '#4e342e', '--link-color': '#c2185b', '--copy-btn-bg': '#e91e63', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#c2185b', '--copy-btn-success-bg': '#aed581' }},
     { name: "Azul Acero Claro", variables: { '--color-h1': '#263238', '--color-h2': '#455a64', '--color-h3': '#607d8b', '--color-h4': '#90a4ae', '--color-h5': '#b0bec5', '--color-h6': '#cfd8dc', '--color-code': '#ff9800', '--bg-pre': '#eceff1', '--bg-code-inline': '#f0f4f7', '--bg-indice': '#cfd8dc', '--color-indice-link': '#455a64', '--color-indice-link-hover': '#263238', '--bg-indice-link-hover': '#90a4ae', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#455a64', '--border-ejercicios': '#90a4ae', '--bg-ejercicios': '#eceff1', '--body-bg-color': '#ffffff', '--text-color': '#263238', '--link-color': '#455a64', '--copy-btn-bg': '#607d8b', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#455a64', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Verde Bosque Claro", variables: { '--color-h1': '#1b5e20', '--color-h2': '#2e7d32', '--color-h3': '#388e3c', '--color-h4': '#66bb6a', '--color-h5': '#81c784', '--color-h6': '#a5d6a7', '--color-code': '#ef5350', '--bg-pre': '#e8f5e9', '--bg-code-inline': '#f1f8e9', '--bg-indice': '#c8e6c9', '--color-indice-link': '#2e7d32', '--color-indice-link-hover': '#1b5e20', '--bg-indice-link-hover': '#a5d6a7', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#2e7d32', '--border-ejercicios': '#66bb6a', '--bg-ejercicios': '#e8f5e9', '--body-bg-color': '#ffffff', '--text-color': '#1b5e20', '--link-color': '#2e7d32', '--copy-btn-bg': '#388e3c', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#2e7d32', '--copy-btn-success-bg': '#ffc107' }},
     { name: "Naranja Suave", variables: { '--color-h1': '#f57c00', '--color-h2': '#fb8c00', '--color-h3': '#ffa726', '--color-h4': '#ffb74d', '--color-h5': '#ffcc80', '--color-h6': '#ffe0b2', '--color-code': '#3f51b5', '--bg-pre': '#fff3e0', '--bg-code-inline': '#ffecb3', '--bg-indice': '#ffccbc', '--color-indice-link': '#f57c00', '--color-indice-link-hover': '#e65100', '--bg-indice-link-hover': '#ffab91', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#f57c00', '--border-ejercicios': '#ffb74d', '--bg-ejercicios': '#fff3e0', '--body-bg-color': '#fff8f2', '--text-color': '#424242', '--link-color': '#f57c00', '--copy-btn-bg': '#fb8c00', '--copy-btn-color': '#424242', '--copy-btn-hover-bg': '#f57c00', '--copy-btn-success-bg': '#66bb6a' }},
     { name: "Azul Zafiro Claro", variables: { '--color-h1': '#0d47a1', '--color-h2': '#1565c0', '--color-h3': '#1976d2', '--color-h4': '#2196f3', '--color-h5': '#64b5f6', '--color-h6': '#90caf9', '--color-code': '#d32f2f', '--bg-pre': '#e3f2fd', '--bg-code-inline': '#e1f5fe', '--bg-indice': '#bbdefb', '--color-indice-link': '#1565c0', '--color-indice-link-hover': '#0d47a1', '--bg-indice-link-hover': '#64b5f6', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#1565c0', '--border-ejercicios': '#2196f3', '--bg-ejercicios': '#e3f2fd', '--body-bg-color': '#ffffff', '--text-color': '#0d47a1', '--link-color': '#1565c0', '--copy-btn-bg': '#1976d2', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#1565c0', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Gris Perla", variables: { '--color-h1': '#424242', '--color-h2': '#616161', '--color-h3': '#757575', '--color-h4': '#9e9e9e', '--color-h5': '#bdbdbd', '--color-h6': '#e0e0e0', '--color-code': '#ff5722', '--bg-pre': '#f5f5f5', '--bg-code-inline': '#eeeeee', '--bg-indice': '#e0e0e0', '--color-indice-link': '#616161', '--color-indice-link-hover': '#424242', '--bg-indice-link-hover': '#bdbdbd', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#616161', '--border-ejercicios': '#9e9e9e', '--bg-ejercicios': '#f5f5f5', '--body-bg-color': '#fcfcfc', '--text-color': '#212121', '--link-color': '#616161', '--copy-btn-bg': '#757575', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#616161', '--copy-btn-success-bg': '#4caf50' }},
     { name: "Verde Lima Claro", variables: { '--color-h1': '#827717', '--color-h2': '#9e9d24', '--color-h3': '#afb42b', '--color-h4': '#c0ca33', '--color-h5': '#d4e157', '--color-h6': '#e6ee9c', '--color-code': '#e53935', '--bg-pre': '#f9fbe7', '--bg-code-inline': '#f0f4c3', '--bg-indice': '#e6ee9c', '--color-indice-link': '#9e9d24', '--color-indice-link-hover': '#827717', '--bg-indice-link-hover': '#d4e157', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#9e9d24', '--border-ejercicios': '#c0ca33', '--bg-ejercicios': '#f9fbe7', '--body-bg-color': '#ffffff', '--text-color': '#558b2f', '--link-color': '#9e9d24', '--copy-btn-bg': '#afb42b', '--copy-btn-color': '#558b2f', '--copy-btn-hover-bg': '#9e9d24', '--copy-btn-success-bg': '#ffb300' }},
     { name: "Beige Rosado", variables: { '--color-h1': '#880e4f', '--color-h2': '#c2185b', '--color-h3': '#e91e63', '--color-h4': '#f06292', '--color-h5': '#f48fb1', '--color-h6': '#f8bbd0', '--color-code': '#4db6ac', '--bg-pre': '#fce4ec', '--bg-code-inline': '#fff0f7', '--bg-indice': '#f8bbd0', '--color-indice-link': '#c2185b', '--color-indice-link-hover': '#880e4f', '--bg-indice-link-hover': '#f48fb1', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#c2185b', '--border-ejercicios': '#f06292', '--bg-ejercicios': '#fce4ec', '--body-bg-color': '#fffafa', '--text-color': '#4e342e', '--link-color': '#c2185b', '--copy-btn-bg': '#e91e63', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#c2185b', '--copy-btn-success-bg': '#aed581' }},
     { name: "Lavanda Grisácea", variables: { '--color-h1': '#4527a0', '--color-h2': '#5e35b1', '--color-h3': '#7e57c2', '--color-h4': '#9575cd', '--color-h5': '#b39ddb', '--color-h6': '#d1c4e9', '--color-code': '#8bc34a', '--bg-pre': '#ede7f6', '--bg-code-inline': '#f5f5f5', '--bg-indice': '#e1bee7', '--color-indice-link': '#5e35b1', '--color-indice-link-hover': '#4527a0', '--bg-indice-link-hover': '#ce93d8', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#5e35b1', '--border-ejercicios': '#b39ddb', '--bg-ejercicios': '#ede7f6', '--body-bg-color': '#fcfcff', '--text-color': '#4a148c', '--link-color': '#5e35b1', '--copy-btn-bg': '#7e57c2', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#5e35b1', '--copy-btn-success-bg': '#ffc107' }},
     { name: "Tonos Tierra Suaves", variables: { '--color-h1': '#3e2723', '--color-h2': '#5d4037', '--color-h3': '#795548', '--color-h4': '#a1887f', '--color-h5': '#bcaaa4', '--color-h6': '#d7ccc8', '--color-code': '#0097a7', '--bg-pre': '#efebe9', '--bg-code-inline': '#f8f8f8', '--bg-indice': '#e0e0e0', '--color-indice-link': '#5d4037', '--color-indice-link-hover': '#3e2723', '--bg-indice-link-hover': '#cccccc', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#5d4037', '--border-ejercicios': '#a1887f', '--bg-ejercicios': '#efebe9', '--body-bg-color': '#fbfaf7', '--text-color': '#4e342e', '--link-color': '#5d4037', '--copy-btn-bg': '#795548', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#5d4037', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Gris Azul Sereno", variables: { '--color-h1': '#263238', '--color-h2': '#455a64', '--color-h3': '#607d8b', '--color-h4': '#90a4ae', '--color-h5': '#b0bec5', '--color-h6': '#cfd8dc', '--color-code': '#ffb300', '--bg-pre': '#eceff1', '--bg-code-inline': '#f0f4f7', '--bg-indice': '#cfd8dc', '--color-indice-link': '#455a64', '--color-indice-link-hover': '#263238', '--bg-indice-link-hover': '#90a4ae', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#455a64', '--border-ejercicios': '#90a4ae', '--bg-ejercicios': '#eceff1', '--body-bg-color': '#faffff', '--text-color': '#263238', '--link-color': '#455a64', '--copy-btn-bg': '#607d8b', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#455a64', '--copy-btn-success-bg': '#4caf50' }},
     { name: "Maíz Dulce", variables: { '--color-h1': '#f57c00', '--color-h2': '#ffb300', '--color-h3': '#ffc107', '--color-h4': '#ffca28', '--color-h5': '#ffeb3b', '--color-h6': '#fff59d', '--color-code': '#e53935', '--bg-pre': '#fff8e1', '--bg-code-inline': '#fffde7', '--bg-indice': '#fff59d', '--color-indice-link': '#ffb300', '--color-indice-link-hover': '#f57c00', '--bg-indice-link-hover': '#ffecb3', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#ffb300', '--border-ejercicios': '#ffc107', '--bg-ejercicios': '#fff8e1', '--body-bg-color': '#fffff0', '--text-color': '#424242', '--link-color': '#ffb300', '--copy-btn-bg': '#ffc107', '--copy-btn-color': '#424242', '--copy-btn-hover-bg': '#ffb300', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Nube de Algodón", variables: { '--color-h1': '#424242', '--color-h2': '#616161', '--color-h3': '#757575', '--color-h4': '#9e9e9e', '--color-h5': '#bdbdbd', '--color-h6': '#e0e0e0', '--color-code': '#2196f3', '--bg-pre': '#fcfcfc', '--bg-code-inline': '#f5f5f5', '--bg-indice': '#eeeeee', '--color-indice-link': '#616161', '--color-indice-link-hover': '#424242', '--bg-indice-link-hover': '#bdbdbd', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#616161', '--border-ejercicios': '#9e9e9e', '--bg-ejercicios': '#fcfcfc', '--body-bg-color': '#ffffff', '--text-color': '#212121', '--link-color': '#616161', '--copy-btn-bg': '#757575', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#616161', '--copy-btn-success-bg': '#4caf50' }},
     { name: "Verde Musgo Claro", variables: { '--color-h1': '#33691e', '--color-h2': '#558b2f', '--color-h3': '#689f38', '--color-h4': '#8bc34a', '--color-h5': '#aed581', '--color-h6': '#c5e1a5', '--color-code': '#f44336', '--bg-pre': '#f1f8e9', '--bg-code-inline': '#e8f5e9', '--bg-indice': '#dcedc8', '--color-indice-link': '#558b2f', '--color-indice-link-hover': '#33691e', '--bg-indice-link-hover': '#c5e1a5', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#558b2f', '--border-ejercicios': '#8bc34a', '--bg-ejercicios': '#f1f8e9', '--body-bg-color': '#fafff7', '--text-color': '#333333', '--link-color': '#558b2f', '--copy-btn-bg': '#689f38', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#558b2f', '--copy-btn-success-bg': '#ffb300' }},
     { name: "Azul Crema", variables: { '--color-h1': '#1f497d', '--color-h2': '#3c64a5', '--color-h3': '#6c8dc3', '--color-h4': '#a7bfde', '--color-h5': '#d3e5f8', '--color-h6': '#eaf2f8', '--color-code': '#d32f2f', '--bg-pre': '#f0f8ff', '--bg-code-inline': '#eef7ff', '--bg-indice': '#e1f5fe', '--color-indice-link': '#1f497d', '--color-indice-link-hover': '#143258', '--bg-indice-link-hover': '#bddbf7', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#1f497d', '--border-ejercicios': '#a7bfde', '--bg-ejercicios': '#f0f8ff', '--body-bg-color': '#f8faff', '--text-color': '#212121', '--link-color': '#1f497d', '--copy-btn-bg': '#3c64a5', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#1f497d', '--copy-btn-success-bg': '#3cb44a' }},
     { name: "Menta Limpia", variables: { '--color-h1': '#005d4a', '--color-h2': '#00796b', '--color-h3': '#009688', '--color-h4': '#4db6ac', '--color-h5': '#80cbc4', '--color-h6': '#b2dfdb', '--color-code': '#ef5350', '--bg-pre': '#e0f2f1', '--bg-code-inline': '#e7fcf9', '--bg-indice': '#ccf0ec', '--color-indice-link': '#00796b', '--color-indice-link-hover': '#004d40', '--bg-indice-link-hover': '#a7d9d3', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#005d4a', '--border-ejercicios': '#80cbc4', '--bg-ejercicios': '#e0f2f1', '--body-bg-color': '#f7fffb', '--text-color': '#263238', '--link-color': '#00796b', '--copy-btn-bg': '#009688', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#00796b', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Rosa Pétalo", variables: { '--color-h1': '#880e4f', '--color-h2': '#c2185b', '--color-h3': '#e91e63', '--color-h4': '#f06292', '--color-h5': '#f48fb1', '--color-h6': '#f8bbd0', '--color-code': '#2196f3', '--bg-pre': '#fce4ec', '--bg-code-inline': '#f8e9ed', '--bg-indice': '#f8bbd0', '--color-indice-link': '#c2185b', '--color-indice-link-hover': '#880e4f', '--bg-indice-link-hover': '#f48fb1', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#c2185b', '--border-ejercicios': '#f06292', '--bg-ejercicios': '#fce4ec', '--body-bg-color': '#fff5f8', '--text-color': '#4e342e', '--link-color': '#c2185b', '--copy-btn-bg': '#e91e63', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#c2185b', '--copy-btn-success-bg': '#4caf50' }},
     { name: "Soleado Suave", variables: { '--color-h1': '#ff8f00', '--color-h2': '#ffa000', '--color-h3': '#ffb300', '--color-h4': '#ffca28', '--color-h5': '#ffe082', '--color-h6': '#ffecb3', '--color-code': '#3f51b5', '--bg-pre': '#fffde7', '--bg-code-inline': '#fff9c4', '--bg-indice': '#fffbe0', '--color-indice-link': '#ff8f00', '--color-indice-link-hover': '#f57f17', '--bg-indice-link-hover': '#ffecb3', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#ff8f00', '--border-ejercicios': '#ffca28', '--bg-ejercicios': '#fffde7', '--body-bg-color': '#fffef5', '--text-color': '#424242', '--link-color': '#ff8f00', '--copy-btn-bg': '#ffb300', '--copy-btn-color': '#424242', '--copy-btn-hover-bg': '#ffa000', '--copy-btn-success-bg': '#00c853' }},
     { name: "Lavanda Clara", variables: { '--color-h1': '#4527a0', '--color-h2': '#5e35b1', '--color-h3': '#7e57c2', '--color-h4': '#9575cd', '--color-h5': '#b39ddb', '--color-h6': '#d1c4e9', '--color-code': '#d32f2f', '--bg-pre': '#ede7f6', '--bg-code-inline': '#f3e5f5', '--bg-indice': '#e1bee7', '--color-indice-link': '#5e35b1', '--color-indice-link-hover': '#4527a0', '--bg-indice-link-hover': '#ce93d8', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#5e35b1', '--border-ejercicios': '#b39ddb', '--bg-ejercicios': '#ede7f6', '--body-bg-color': '#fdfaff', '--text-color': '#4a148c', '--link-color': '#5e35b1', '--copy-btn-bg': '#7e57c2', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#5e35b1', '--copy-btn-success-bg': '#66bb6a' }},
     { name: "Gris Minimalista", variables: { '--color-h1': '#424242', '--color-h2': '#616161', '--color-h3': '#757575', '--color-h4': '#9e9e9e', '--color-h5': '#bdbdbd', '--color-h6': '#e0e0e0', '--color-code': '#f44336', '--bg-pre': '#f5f5f5', '--bg-code-inline': '#eeeeee', '--bg-indice': '#e0e0e0', '--color-indice-link': '#616161', '--color-indice-link-hover': '#424242', '--bg-indice-link-hover': '#bdbdbd', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#616161', '--border-ejercicios': '#9e9e9e', '--bg-ejercicios': '#f5f5f5', '--body-bg-color': '#fcfcfc', '--text-color': '#212121', '--link-color': '#616161', '--copy-btn-bg': '#757575', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#616161', '--copy-btn-success-bg': '#4caf50' }},
     { name: "Celeste Pastel", variables: { '--color-h1': '#01579b', '--color-h2': '#0277bd', '--color-h3': '#0288d1', '--color-h4': '#03a9f4', '--color-h5': '#4fc3f7', '--color-h6': '#81d4fa', '--color-code': '#d32f2f', '--bg-pre': '#e1f5fe', '--bg-code-inline': '#e0f2f7', '--bg-indice': '#b3e5fc', '--color-indice-link': '#0277bd', '--color-indice-link-hover': '#01579b', '--bg-indice-link-hover': '#4fc3f7', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#0277bd', '--border-ejercicios': '#03a9f4', '--bg-ejercicios': '#e1f5fe', '--body-bg-color': '#f5faff', '--text-color': '#212121', '--link-color': '#0277bd', '--copy-btn-bg': '#0288d1', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#0277bd', '--copy-btn-success-bg': '#7cb342' }},
     { name: "Oliva Suave", variables: { '--color-h1': '#33691e', '--color-h2': '#558b2f', '--color-h3': '#689f38', '--color-h4': '#8bc34a', '--color-h5': '#aed581', '--color-h6': '#c5e1a5', '--color-code': '#fbc02d', '--bg-pre': '#f1f8e9', '--bg-code-inline': '#e8f5e9', '--bg-indice': '#dcedc8', '--color-indice-link': '#558b2f', '--color-indice-link-hover': '#33691e', '--bg-indice-link-hover': '#c5e1a5', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#558b2f', '--border-ejercicios': '#8bc34a', '--bg-ejercicios': '#f1f8e9', '--body-bg-color': '#fafff2', '--text-color': '#333333', '--link-color': '#558b2f', '--copy-btn-bg': '#689f38', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#558b2f', '--copy-btn-success-bg': '#ffb300' }},
     { name: "Naranja Cremoso", variables: { '--color-h1': '#e65100', '--color-h2': '#f57c00', '--color-h3': '#fb8c00', '--color-h4': '#ffb74d', '--color-h5': '#ffcc80', '--color-h6': '#ffe0b2', '--color-code': '#424242', '--bg-pre': '#fff3e0', '--bg-code-inline': '#ffe0b2', '--bg-indice': '#ffccbc', '--color-indice-link': '#e65100', '--color-indice-link-hover': '#bf360c', '--bg-indice-link-hover': '#ffab91', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#e65100', '--border-ejercicios': '#ffb74d', '--bg-ejercicios': '#fff3e0', '--body-bg-color': '#fffbf7', '--text-color': '#424242', '--link-color': '#f57c00', '--copy-btn-bg': '#fb8c00', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#f57c00', '--copy-btn-success-bg': '#81c784' }},
     { name: "Índigo Pastel", variables: { '--color-h1': '#1a237e', '--color-h2': '#303f9f', '--color-h3': '#3f51b5', '--color-h4': '#7986cb', '--color-h5': '#9fa8da', '--color-h6': '#c5cae9', '--color-code': '#f44336', '--bg-pre': '#e8eaf6', '--bg-code-inline': '#e0eafc', '--bg-indice': '#c5cae9', '--color-indice-link': '#3f51b5', '--color-indice-link-hover': '#1a237e', '--bg-indice-link-hover': '#9fa8da', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#3f51b5', '--border-ejercicios': '#7986cb', '--bg-ejercicios': '#e8eaf6', '--body-bg-color': '#faffff', '--text-color': '#1a237e', '--link-color': '#3f51b5', '--copy-btn-bg': '#303f9f', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#1a237e', '--copy-btn-success-bg': '#4caf50' }},
     { name: "Turquesa Pastel", variables: { '--color-h1': '#006064', '--color-h2': '#00838f', '--color-h3': '#0097a7', '--color-h4': '#4dd0e1', '--color-h5': '#80deea', '--color-h6': '#b2ebf2', '--color-code': '#ef6c00', '--bg-pre': '#e0f7fa', '--bg-code-inline': '#e7fcfc', '--bg-indice': '#b2ebf2', '--color-indice-link': '#00838f', '--color-indice-link-hover': '#006064', '--bg-indice-link-hover': '#80deea', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#00838f', '--border-ejercicios': '#4dd0e1', '--bg-ejercicios': '#e0f7fa', '--body-bg-color': '#f0fcff', '--text-color': '#263238', '--link-color': '#00838f', '--copy-btn-bg': '#0097a7', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#00838f', '--copy-btn-success-bg': '#66bb6a' }},
     { name: "Arena Cálida", variables: { '--color-h1': '#a1887f', '--color-h2': '#bcaaa4', '--color-h3': '#d7ccc8', '--color-h4': '#e0e0e0', '--color-h5': '#eeeeee', '--color-h6': '#f5f5f5', '--color-code': '#f44336', '--bg-pre': '#fcfcfc', '--bg-code-inline': '#f5f5f5', '--bg-indice': '#eeeeee', '--color-indice-link': '#795548', '--color-indice-link-hover': '#5d4037', '--bg-indice-link-hover': '#d7ccc8', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#795548', '--border-ejercicios': '#d7ccc8', '--bg-ejercicios': '#fcfcfc', '--body-bg-color': '#fffcf7', '--text-color': '#4e342e', '--link-color': '#795548', '--copy-btn-bg': '#bcaaa4', '--copy-btn-color': '#4e342e', '--copy-btn-hover-bg': '#a1887f', '--copy-btn-success-bg': '#81c784' }},
     { name: "Coral Pastel", variables: { '--color-h1': '#bf360c', '--color-h2': '#f4511e', '--color-h3': '#ff5722', '--color-h4': '#ff8a65', '--color-h5': '#ffab91', '--color-h6': '#ffccbc', '--color-code': '#00838f', '--bg-pre': '#fbe9e7', '--bg-code-inline': '#fff3e0', '--bg-indice': '#ffccbc', '--color-indice-link': '#f4511e', '--color-indice-link-hover': '#bf360c', '--bg-indice-link-hover': '#ffab91', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#f4511e', '--border-ejercicios': '#ff8a65', '--bg-ejercicios': '#fbe9e7', '--body-bg-color': '#fffafa', '--text-color': '#3e2723', '--link-color': '#f4511e', '--copy-btn-bg': '#ff5722', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#f4511e', '--copy-btn-success-bg': '#66bb6a' }},
     { name: "Violeta Pastel", variables: { '--color-h1': '#311b92', '--color-h2': '#4527a0', '--color-h3': '#5e35b1', '--color-h4': '#9575cd', '--color-h5': '#b39ddb', '--color-h6': '#d1c4e9', '--color-code': '#ffc107', '--bg-pre': '#f3e5f5', '--bg-code-inline': '#e1bee7', '--bg-indice': '#e1bee7', '--color-indice-link': '#4527a0', '--color-indice-link-hover': '#311b92', '--bg-indice-link-hover': '#ce93d8', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#4527a0', '--border-ejercicios': '#9575cd', '--bg-ejercicios': '#f3e5f5', '--body-bg-color': '#fbfaff', '--text-color': '#311b92', '--link-color': '#4527a0', '--copy-btn-bg': '#5e35b1', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#4527a0', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Cian Pastel", variables: { '--color-h1': '#006064', '--color-h2': '#00838f', '--color-h3': '#0097a7', '--color-h4': '#4dd0e1', '--color-h5': '#80deea', '--color-h6': '#b2ebf2', '--color-code': '#ff5252', '--bg-pre': '#e0f7fa', '--bg-code-inline': '#e0f7fa', '--bg-indice': '#b2ebf2', '--color-indice-link': '#00838f', '--color-indice-link-hover': '#006064', '--bg-indice-link-hover': '#80deea', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#00838f', '--border-ejercicios': '#4dd0e1', '--bg-ejercicios': '#e0f7fa', '--body-bg-color': '#faffff', '--text-color': '#263238', '--link-color': '#00838f', '--copy-btn-bg': '#0097a7', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#00838f', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Ocre Pastel", variables: { '--color-h1': '#ff6f00', '--color-h2': '#ff8f00', '--color-h3': '#ffa000', '--color-h4': '#ffc107', '--color-h5': '#ffeb3b', '--color-h6': '#fff59d', '--color-code': '#3f51b5', '--bg-pre': '#fffde7', '--bg-code-inline': '#fff8e1', '--bg-indice': '#ffecb3', '--color-indice-link': '#ff8f00', '--color-indice-link-hover': '#ff6f00', '--bg-indice-link-hover': '#ffe082', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#ff8f00', '--border-ejercicios': '#ffc107', '--bg-ejercicios': '#fffde7', '--body-bg-color': '#fffef7', '--text-color': '#212121', '--link-color': '#ff8f00', '--copy-btn-bg': '#ffa000', '--copy-btn-color': '#212121', '--copy-btn-hover-bg': '#ff8f00', '--copy-btn-success-bg': '#4caf50' }},
     { name: "Rosa Polvo", variables: { '--color-h1': '#880e4f', '--color-h2': '#c2185b', '--color-h3': '#e91e63', '--color-h4': '#f06292', '--color-h5': '#f48fb1', '--color-h6': '#f8bbd0', '--color-code': '#4db6ac', '--bg-pre': '#fce4ec', '--bg-code-inline': '#fff0f7', '--bg-indice': '#f8bbd0', '--color-indice-link': '#c2185b', '--color-indice-link-hover': '#880e4f', '--bg-indice-link-hover': '#f48fb1', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#c2185b', '--border-ejercicios': '#f06292', '--bg-ejercicios': '#fce4ec', '--body-bg-color': '#fffcfc', '--text-color': '#4e342e', '--link-color': '#c2185b', '--copy-btn-bg': '#e91e63', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#c2185b', '--copy-btn-success-bg': '#aed581' }},
     { name: "Azul Acero Pastel", variables: { '--color-h1': '#263238', '--color-h2': '#455a64', '--color-h3': '#607d8b', '--color-h4': '#90a4ae', '--color-h5': '#b0bec5', '--color-h6': '#cfd8dc', '--color-code': '#ff9800', '--bg-pre': '#eceff1', '--bg-code-inline': '#f0f4f7', '--bg-indice': '#cfd8dc', '--color-indice-link': '#455a64', '--color-indice-link-hover': '#263238', '--bg-indice-link-hover': '#90a4ae', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#455a64', '--border-ejercicios': '#90a4ae', '--bg-ejercicios': '#eceff1', '--body-bg-color': '#fafffd', '--text-color': '#263238', '--link-color': '#455a64', '--copy-btn-bg': '#607d8b', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#455a64', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Verde Bosque Pastel", variables: { '--color-h1': '#1b5e20', '--color-h2': '#2e7d32', '--color-h3': '#388e3c', '--color-h4': '#66bb6a', '--color-h5': '#81c784', '--color-h6': '#a5d6a7', '--color-code': '#ef5350', '--bg-pre': '#e8f5e9', '--bg-code-inline': '#f1f8e9', '--bg-indice': '#c8e6c9', '--color-indice-link': '#2e7d32', '--color-indice-link-hover': '#1b5e20', '--bg-indice-link-hover': '#a5d6a7', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#2e7d32', '--border-ejercicios': '#66bb6a', '--bg-ejercicios': '#e8f5e9', '--body-bg-color': '#fafffa', '--text-color': '#1b5e20', '--link-color': '#2e7d32', '--copy-btn-bg': '#388e3c', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#2e7d32', '--copy-btn-success-bg': '#ffc107' }},
     { name: "Naranja Pastel", variables: { '--color-h1': '#f57c00', '--color-h2': '#fb8c00', '--color-h3': '#ffa726', '--color-h4': '#ffb74d', '--color-h5': '#ffcc80', '--color-h6': '#ffe0b2', '--color-code': '#3f51b5', '--bg-pre': '#fff3e0', '--bg-code-inline': '#ffecb3', '--bg-indice': '#ffccbc', '--color-indice-link': '#f57c00', '--color-indice-link-hover': '#e65100', '--bg-indice-link-hover': '#ffab91', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#f57c00', '--border-ejercicios': '#ffb74d', '--bg-ejercicios': '#fff3e0', '--body-bg-color': '#fffcf5', '--text-color': '#424242', '--link-color': '#f57c00', '--copy-btn-bg': '#fb8c00', '--copy-btn-color': '#424242', '--copy-btn-hover-bg': '#f57c00', '--copy-btn-success-bg': '#66bb6a' }},
     { name: "Azul Zafiro Pastel", variables: { '--color-h1': '#0d47a1', '--color-h2': '#1565c0', '--color-h3': '#1976d2', '--color-h4': '#2196f3', '--color-h5': '#64b5f6', '--color-h6': '#90caf9', '--color-code': '#d32f2f', '--bg-pre': '#e3f2fd', '--bg-code-inline': '#e1f5fe', '--bg-indice': '#bbdefb', '--color-indice-link': '#1565c0', '--color-indice-link-hover': '#0d47a1', '--bg-indice-link-hover': '#64b5f6', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#1565c0', '--border-ejercicios': '#2196f3', '--bg-ejercicios': '#e3f2fd', '--body-bg-color': '#f8fcff', '--text-color': '#0d47a1', '--link-color': '#1565c0', '--copy-btn-bg': '#1976d2', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#1565c0', '--copy-btn-success-bg': '#8bc34a' }},
     { name: "Gris Cálido Pastel", variables: { '--color-h1': '#424242', '--color-h2': '#616161', '--color-h3': '#757575', '--color-h4': '#9e9e9e', '--color-h5': '#bdbdbd', '--color-h6': '#e0e0e0', '--color-code': '#ff5722', '--bg-pre': '#f5f5f5', '--bg-code-inline': '#eeeeee', '--bg-indice': '#e0e0e0', '--color-indice-link': '#616161', '--color-indice-link-hover': '#424242', '--bg-indice-link-hover': '#bdbdbd', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#616161', '--border-ejercicios': '#9e9e9e', '--bg-ejercicios': '#f5f5f5', '--body-bg-color': '#fcfaf8', '--text-color': '#212121', '--link-color': '#616161', '--copy-btn-bg': '#757575', '--copy-btn-color': '#ffffff', '--copy-btn-hover-bg': '#616161', '--copy-btn-success-bg': '#4caf50' }},
     { name: "Verde Lima Pastel", variables: { '--color-h1': '#827717', '--color-h2': '#9e9d24', '--color-h3': '#afb42b', '--color-h4': '#c0ca33', '--color-h5': '#d4e157', '--color-h6': '#e6ee9c', '--color-code': '#e53935', '--bg-pre': '#f9fbe7', '--bg-code-inline': '#f0f4c3', '--bg-indice': '#e6ee9c', '--color-indice-link': '#9e9d24', '--color-indice-link-hover': '#827717', '--bg-indice-link-hover': '#d4e157', '--color-indice-link-active': '#ffffff', '--bg-indice-link-active': '#9e9d24', '--border-ejercicios': '#c0ca33', '--bg-ejercicios': '#f9fbe7', '--body-bg-color': '#fbfff0', '--text-color': '#558b2f', '--link-color': '#9e9d24', '--copy-btn-bg': '#afb42b', '--copy-btn-color': '#558b2f', '--copy-btn-hover-bg': '#9e9d24', '--copy-btn-success-bg': '#ffb300' }}
];
        // --- Helper Functions ---
        function slugify(text) { if (!text) return ''; return text.toString().toLowerCase().replace(/\s+/g, '-').replace(/[^\w\-\u00C0-\u017F]+/g, '').replace(/\-\-+/g, '-').replace(/^-+/, '').replace(/-+$/, ''); }
        function getAppliedVariables() { const appliedVariables = { ...defaultCssVariables }; const rootStyles = getComputedStyle(document.documentElement); personalizationInputs.forEach(input => { const varName = input.dataset.cssVar; if (varName && appliedVariables.hasOwnProperty(varName)) { try { const currentValue = rootStyles.getPropertyValue(varName).trim(); if(currentValue) { appliedVariables[varName] = currentValue; } } catch(e) {} } }); return appliedVariables; }
        function generateCssForDownload() { const appliedVars = getAppliedVariables(); let variablesString = ':root {\n'; for (const [key, value] of Object.entries(appliedVars)) { if (value) { variablesString += `    ${key}: ${value};\n`; } else { variablesString += `    ${key}: ${defaultCssVariables[key] || 'inherit'};\n`; } } variablesString += '}\n\n'; const allStyles = document.querySelector('head > style').innerHTML; const startIndex = allStyles.indexOf('/* === INICIO ESTILOS UNIFICADOS'); const endIndexMarker = '/* === FIN ESTILOS UNIFICADOS === */'; let endIndex = allStyles.indexOf(endIndexMarker); if (endIndex === -1) { endIndex = allStyles.length; } let staticStyles = ''; if (startIndex !== -1) { staticStyles = allStyles.substring(startIndex, endIndex + endIndexMarker.length); } else { staticStyles = ""; } return variablesString + staticStyles; }
        function addCopyButtons(container) { const preBlocks = container.querySelectorAll('pre'); preBlocks.forEach((pre) => { if (pre.querySelector('.copy-code-btn')) { pre.querySelector('.copy-code-btn').remove(); } const copyButton = document.createElement('button'); copyButton.className = 'btn btn-sm copy-code-btn'; copyButton.setAttribute('aria-label', 'Copiar código'); const iconSvg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/></svg>`; const successSvg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"><path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425z"/></svg> Copiado!`; copyButton.innerHTML = iconSvg; copyButton.addEventListener('click', () => { const codeElement = pre.querySelector('code'); const textToCopy = codeElement ? codeElement.innerText : pre.innerText; navigator.clipboard.writeText(textToCopy).then(() => { copyButton.innerHTML = successSvg; copyButton.classList.add('copied'); setTimeout(() => { copyButton.innerHTML = iconSvg; copyButton.classList.remove('copied'); }, 2000); }).catch(err => { console.error('Error al copiar: ', err); copyButton.innerHTML = 'Error'; setTimeout(() => { copyButton.innerHTML = iconSvg; }, 2000); }); }); pre.style.position = pre.style.position || 'relative'; pre.appendChild(copyButton); }); }

// --- INICIO CAMBIOS PARA IMÁGENES ---
function cleanupImageStore() {
    const currentMarkdown = markdownInput.value;
    const activeImageIds = new Set();
    const imgPlaceholderRegex = /<img\s+data-img-id="([^"]+)"/g;
    let match;
    while ((match = imgPlaceholderRegex.exec(currentMarkdown)) !== null) {
        activeImageIds.add(match[1]);
    }
    for (const storedId in imageStore) {
        if (!activeImageIds.has(storedId)) {
            delete imageStore[storedId];
            // console.log(`Imagen ${storedId} eliminada del store.`);
        }
    }
}

function preprocessImagePlaceholders(markdown) {
    let processedMarkdown = markdown;
    const imgPlaceholderRegex = /<img\s+data-img-id="([^"]+)"\s+alt="([^"]*)"\s+src="#image-placeholder"\s*(class="[^"]*")?\s*\/?>/g;

    processedMarkdown = processedMarkdown.replace(imgPlaceholderRegex, (match, imgId, altText, classAttr) => {
        if (imageStore[imgId]) {
            const base64Src = imageStore[imgId];
            const classes = classAttr ? classAttr.trim() : 'class="img-fluid"';
            return `<img src="${base64Src}" alt="${altText}" ${classes}>`;
        }
        console.warn(`Image with ID ${imgId} not found in store.`);
        return `<p style="color:red; border:1px solid red; padding: 0.5em;">[Error: Imagen ${imgId} no encontrada en el almacén. Placeholder original: ${match}]</p>`;
    });
    return processedMarkdown;
}
// --- FIN CAMBIOS PARA IMÁGENES ---


function preprocessMarkdown(markdownText) {
    let processedText = markdownText;
    
    // --- PRIMERO, procesar los placeholders de imágenes ---
    processedText = preprocessImagePlaceholders(processedText);
    // --- FIN DEL PROCESAMIENTO DE IMÁGENES ---

    const accordionRegex = /^\+\+S\s+(.*?)\s*$([\s\S]*?)^\+\+E\s*$/gm;
    let accordionGroupCounter = 0;
    accordionContentPlaceholders = {}; 

    processedText = processedText.replace(accordionRegex, (match, title, content) => {
        accordionGroupCounter++;
        const accordionId = `custom-accordion-${Date.now()}-${accordionGroupCounter}`;
        const headingId = `heading-${accordionId}-item1`;
        const collapseId = `collapse-${accordionId}-item1`;
        const placeholderId = `accordion-content-placeholder-${accordionId}`; 
        
        const escapedTitle = title.trim().replace(/"/g, '"');
        accordionContentPlaceholders[placeholderId] = content.trim();

        const accordionHtml =
`<div class="accordion" id="${accordionId}">
<div class="accordion-item">
<h2 class="accordion-header" id="${headingId}">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#${collapseId}" aria-expanded="false" aria-controls="${collapseId}">
${escapedTitle}
</button>
</h2>
<div id="${collapseId}" class="accordion-collapse collapse" aria-labelledby="${headingId}" data-bs-parent="#${accordionId}">
<div class="accordion-body" data-accordion-placeholder-id="${placeholderId}">
</div>
</div>
</div>
</div>\n`;
        return accordionHtml;
    });
    return processedText;
}

        function generateJsForDownload(targetId = '#indiceContenido', bodySelector = '.generated-html-body', offset = SCROLL_OFFSET_DOWNLOAD) {
            return `
            document.addEventListener('DOMContentLoaded', () => {
                const scrollSpyTarget = document.querySelector('${targetId}');
                const scrollSpyBody = document.querySelector('${bodySelector}');
                const scrollOffset = ${offset};
                let currentScrollSpy = null;

                function initOrRefreshScrollSpy() {
                    if (!scrollSpyBody || !scrollSpyTarget) {
                        console.warn('ScrollSpy target or body not found.');
                        return;
                    }
                    try {
                        if (typeof bootstrap !== 'undefined' && bootstrap.ScrollSpy) {
                            if (currentScrollSpy) {
                                currentScrollSpy.dispose();
                            }
                            currentScrollSpy = new bootstrap.ScrollSpy(scrollSpyBody, {
                                target: scrollSpyTarget,
                                offset: scrollOffset,
                                rootMargin: '0px 0px -25%'
                            });
                        } else {
                            console.warn('Bootstrap ScrollSpy component not found.');
                        }
                    } catch (e) {
                        console.error('Error initializing ScrollSpy:', e);
                    }
                }


                initOrRefreshScrollSpy();

                document.querySelectorAll('${targetId} a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const targetId = this.getAttribute('href');
                        try {
                            const targetElement = document.querySelector(targetId);
                            if (targetElement) {
                                const elementPosition = targetElement.getBoundingClientRect().top;
                                const offsetPosition = elementPosition + window.pageYOffset - scrollOffset + 5;
                                window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
                            } else { console.warn('Scroll target element not found:', targetId); }
                        } catch (err) { console.error('Error scrolling to element:', err); }
                    });
                });

                const mainContentElement = document.querySelector('#mainContent');
                if (mainContentElement && typeof addCopyButtons === 'function') {
                    addCopyButtons(mainContentElement);
                } else if (!mainContentElement) {
                     console.warn('#mainContent not found for adding copy buttons.');
                } else {
                     console.warn('addCopyButtons function not found.');
                }

                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(initOrRefreshScrollSpy, 250);
                });

                setTimeout(() => initOrRefreshScrollSpy(), 500);
            });`;
        }

        function generateToc(contentContainer, tocContainer) {
            tocContainer.innerHTML = '';
            const headings = contentContainer.querySelectorAll(
                'h1:not(.accordion-body h1), h2:not(.accordion-body h2), h3:not(.accordion-body h3), h4:not(.accordion-body h4), h5:not(.accordion-body h5), h6:not(.accordion-body h6)'
            );
            let usedIds = new Set();

            headings.forEach((heading, index) => {
                const level = parseInt(heading.tagName.substring(1));
                let baseId = heading.getAttribute('id');

                if (!baseId) {
                    baseId = slugify(heading.textContent);
                } else {
                    baseId = slugify(baseId);
                }

                let id = baseId || `section-${index + 1}`;
                const originalIdAttempt = id; 

                if (/^\d/.test(id)) {
                    id = 'h-' + id;
                }
                
                let i = 1;
                while (usedIds.has(id) || document.getElementById(id)) {
                    id = `${originalIdAttempt || 'section'}-${index + 1}-${i}`;
                    if (/^\d/.test(id)) {
                         id = 'h-' + id;
                    }
                    i++;
                }

                if (heading.getAttribute('id') !== id) {
                    heading.setAttribute('id', id);
                }
                usedIds.add(id);

                const link = document.createElement('a');
                link.classList.add('nav-link');
                if (level > 1) {
                    link.classList.add(`ps-${Math.min(level + 1, 6)}`);
                }
                link.href = `#${id}`;
                link.textContent = heading.textContent.trim() || `Sección ${index + 1}`;
                link.title = heading.textContent.trim() || `Sección ${index + 1}`;
                tocContainer.appendChild(link);
            });
        }

        function updateColorPickers(variables) { personalizationInputs.forEach(input => { const varName = input.dataset.cssVar; if (varName && variables[varName]) { try { let colorValue = variables[varName]; if (!/^#([0-9a-fA-F]{3}){1,2}$/i.test(colorValue)) { colorValue = defaultCssVariables[varName] || '#000000'; } input.value = colorValue; } catch(e) { input.value = defaultCssVariables[varName] || '#000000'; } } }); }
        function applyTheme(themeIndex) {
            if (themeIndex < 0 || themeIndex >= themes.length) { return; }
            const themeVariables = themes[themeIndex].variables;
            const root = document.documentElement;
            for (const [key, value] of Object.entries(themeVariables)) { root.style.setProperty(key, value); }
            updateColorPickers(themeVariables);
            const textColor = getComputedStyle(root).getPropertyValue('--text-color').trim().toLowerCase();
            const bgColor = getComputedStyle(root).getPropertyValue('--body-bg-color').trim().toLowerCase();
            const isLikelyDark = (textColor.startsWith('#f') || textColor === 'white' || textColor.startsWith('#e')) && (bgColor.startsWith('#0') || bgColor.startsWith('#1') || bgColor.startsWith('#2') || bgColor.startsWith('#3') || bgColor === 'black');

            if (isLikelyDark) {
                root.setAttribute('data-bs-theme', 'dark');
            } else {
                 root.removeAttribute('data-bs-theme');
                 const offcanvasClose = document.querySelector('.offcanvas-header .btn-close');
                 if(offcanvasClose) { offcanvasClose.style.display = 'none'; offcanvasClose.offsetHeight; offcanvasClose.style.display = ''; }
            }
        }

function generateHtmlPreview() {
    cleanupImageStore(); // Limpia el imageStore
    const markdownText = markdownInput.value;
    const preprocessedMarkdown = preprocessMarkdown(markdownText); 

    marked.setOptions({ gfm: true, breaks: false, pedantic: false, smartLists: true, smartypants: false });
    const rawHtml = marked.parse(preprocessedMarkdown); 
    
    const cleanHtml = DOMPurify.sanitize(rawHtml, { 
        USE_PROFILES: { html: true }, 
        ADD_TAGS: ['button'], 
        ADD_ATTR: ['data-bs-toggle', 'data-bs-target', 'aria-controls', 'aria-expanded', 'aria-labelledby', 'data-bs-parent', 'aria-label', 'role', 'class', 'alt', 'src', 'id', 'style', 'data-accordion-placeholder-id', 'data-img-id'], // data-img-id podría no ser necesario aquí ya que se resuelve antes
        FORCE_REL_FOR_EXTERNAL_LINKS: true 
    });
    
    mainContentPreview.innerHTML = cleanHtml;

    const accordionBodyPlaceholders = mainContentPreview.querySelectorAll('[data-accordion-placeholder-id]');
    accordionBodyPlaceholders.forEach(bodyElement => {
        const placeholderId = bodyElement.dataset.accordionPlaceholderId;
        if (accordionContentPlaceholders[placeholderId]) {
            const accordionMarkdownContent = accordionContentPlaceholders[placeholderId];
            // El contenido del acordeón (accordionMarkdownContent) ya ha pasado por preprocessImagePlaceholders
            // porque se tomó de 'processedText' después de la llamada a preprocessImagePlaceholders.
            // Así que las imágenes dentro del acordeón ya deberían tener su src Base64.
            const accordionRawHtml = marked.parse(accordionMarkdownContent);
            bodyElement.innerHTML = DOMPurify.sanitize(accordionRawHtml, { 
                USE_PROFILES: { html: true }, 
                ADD_TAGS: ['button'],
                ADD_ATTR: ['data-bs-toggle', 'data-bs-target', 'aria-controls', 'aria-expanded', 'aria-labelledby', 'data-bs-parent', 'aria-label', 'role', 'class', 'alt', 'src', 'id', 'style']
            });
        }
        bodyElement.removeAttribute('data-accordion-placeholder-id');
    });

    generateToc(mainContentPreview, indiceNavPreview);
    addCopyButtons(mainContentPreview); 

    if (scrollSpyInstance) {
        scrollSpyInstance.dispose();
        scrollSpyInstance = null;
    }

    if (htmlOutputBody && indiceContenidoPreviewContainer && mainContentPreview.innerHTML.trim() !== '' && indiceNavPreview.hasChildNodes()) {
         try {
            if (typeof bootstrap !== 'undefined' && bootstrap.ScrollSpy) {
                scrollSpyInstance = new bootstrap.ScrollSpy(htmlOutputBody, {
                     target: '#indiceContenidoPreview',
                     offset: SCROLL_OFFSET_PREVIEW,
                     rootMargin: '0px 0px -25%'
                });
                setTimeout(() => {
                     if (scrollSpyInstance) {
                         scrollSpyInstance.refresh();
                         window.dispatchEvent(new Event('scroll'));
                     }
                }, 300);
            } else {
                console.warn("Bootstrap or ScrollSpy not loaded.");
            }
        } catch(e) {
            console.error("Error initializing ScrollSpy:", e);
            scrollSpyInstance = null;
         }
    } else if (!mainContentPreview.innerHTML.trim()) {
        indiceNavPreview.innerHTML = '';
    } else {
         console.warn("ScrollSpy not initialized. Check if content generates valid headings for the TOC.");
    }
}


function downloadHtml() {
    cleanupImageStore(); // Limpia el imageStore
    const markdownText = markdownInput.value;
    if (!markdownText.trim()) { alert("No hay contenido Markdown para descargar."); return; }
    
    const preprocessedMarkdown = preprocessMarkdown(markdownText); 

    marked.setOptions({ gfm: true, breaks: false, pedantic: false, smartLists: true, smartypants: false });
    const rawHtmlSkeleton = marked.parse(preprocessedMarkdown);
    
    const cleanHtmlSkeleton = DOMPurify.sanitize(rawHtmlSkeleton, { 
        USE_PROFILES: { html: true }, 
        ADD_TAGS: ['button'], 
        ADD_ATTR: ['data-bs-toggle', 'data-bs-target', 'aria-controls', 'aria-expanded', 'aria-labelledby', 'data-bs-parent', 'aria-label', 'role', 'class', 'alt', 'src', 'id', 'style', 'data-accordion-placeholder-id', 'data-img-id'], // Igual que en preview
        FORCE_REL_FOR_EXTERNAL_LINKS: true 
    });
    
    const tempContent = document.createElement('div');
    tempContent.innerHTML = cleanHtmlSkeleton;

    const accordionBodyPlaceholdersInTemp = tempContent.querySelectorAll('[data-accordion-placeholder-id]');
    accordionBodyPlaceholdersInTemp.forEach(bodyElement => {
        const placeholderId = bodyElement.dataset.accordionPlaceholderId;
        if (accordionContentPlaceholders[placeholderId]) {
            const accordionMarkdownContent = accordionContentPlaceholders[placeholderId];
            const accordionRawHtml = marked.parse(accordionMarkdownContent);
            bodyElement.innerHTML = DOMPurify.sanitize(accordionRawHtml, { 
                USE_PROFILES: { html: true }, 
                ADD_TAGS: ['button'], 
                ADD_ATTR: ['data-bs-toggle', 'data-bs-target', 'aria-controls', 'aria-expanded', 'aria-labelledby', 'data-bs-parent', 'aria-label', 'role', 'class', 'alt', 'src', 'id', 'style']
            });
        }
        bodyElement.removeAttribute('data-accordion-placeholder-id');
    });

    const tempTocNav = document.createElement('nav');
    tempTocNav.classList.add('nav', 'nav-pills', 'flex-column');
    tempTocNav.id = 'indiceNav'; 
    generateToc(tempContent, tempTocNav); 
    
    const cssToEmbed = generateCssForDownload();
    const jsToEmbed = generateJsForDownload('#indiceContenido', '.generated-html-body', SCROLL_OFFSET_DOWNLOAD);
    const addCopyButtonsFuncStringForDownload = addCopyButtons.toString();
    
    const firstHeadingElement = tempContent.querySelector('h1:not(.accordion-body h1), h2:not(.accordion-body h2), h3:not(.accordion-body h3), h4:not(.accordion-body h4), h5:not(.accordion-body h5), h6:not(.accordion-body h6)');
    const pageTitle = firstHeadingElement ? firstHeadingElement.textContent.trim() : 'Documento Generado';
    const isDark = document.documentElement.getAttribute('data-bs-theme') === 'dark';
    const htmlAttributes = isDark ? `data-bs-theme="dark"` : '';
    const bodyClass = `generated-html-body`;

    const htmlContent = `<!DOCTYPE html>
<html lang="es" ${htmlAttributes}>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${pageTitle.replace(/</g, "<").replace(/>/g, ">")}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
/* Embedded CSS */
${cssToEmbed}
    </style>
</head>
<body class="${bodyClass}" data-bs-spy="scroll" data-bs-target="#indiceContenido" data-bs-offset="${SCROLL_OFFSET_DOWNLOAD + 10}">
    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-md-4 col-lg-3 d-none d-md-block">
                <nav id="indiceContenido">
                    <h5 class="mb-3">Índice</h5>
                    ${tempTocNav.outerHTML}
                </nav>
            </div>
            <div class="col-md-8 col-lg-9">
                <main id="mainContent">
                    ${tempContent.innerHTML}
                </main>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"><\/script>
    <script>
// Embedded JS
${addCopyButtonsFuncStringForDownload}
${jsToEmbed}
    <\/script>
</body>
</html>`;

    const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    const filenameBase = firstHeadingElement ? slugify(firstHeadingElement.textContent.trim()) : 'documento';
    a.download = `${filenameBase || 'generado'}.html`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}

        function insertAccordionTemplate() {
            const textarea = markdownInput;
            const startPos = textarea.selectionStart;
            const endPos = textarea.selectionEnd;
            const textToInsert =
`++S Título del Acordeón
Aquí va el contenido que estará inicialmente oculto.
Puedes usar **Markdown** aquí dentro.
++E
`;
            textarea.value = textarea.value.substring(0, startPos) + textToInsert + textarea.value.substring(endPos);
            const titlePlaceholder = 'Título del Acordeón';
            const cursorPos = startPos + textToInsert.indexOf(titlePlaceholder);
            const cursorEnd = cursorPos + titlePlaceholder.length;
            textarea.selectionStart = cursorPos;
            textarea.selectionEnd = cursorEnd;
            textarea.focus();
        }

        // --- INICIO CAMBIOS PARA IMÁGENES ---
        function insertImagePlaceholderInTextarea(altText = "Imagen insertada") {
            const textarea = markdownInput;
            const startPos = textarea.selectionStart;
            const endPos = textarea.selectionEnd;

            imageIdCounter++;
            const uniqueImageId = `embedded-img-${Date.now()}-${imageIdCounter}`;
            // Escapar comillas dobles en altText para el atributo HTML
            const safeAltText = altText.replace(/"/g, '&quot;'); 

            // Este es el placeholder que se insertará en el textarea
            const textToInsert = `\n<img data-img-id="${uniqueImageId}" alt="${safeAltText}" src="#image-placeholder" class="img-fluid">\n`;

            textarea.value = textarea.value.substring(0, startPos) + textToInsert + textarea.value.substring(endPos);
            const cursorPos = startPos + textToInsert.length;
            textarea.selectionStart = cursorPos;
            textarea.selectionEnd = cursorPos;
            textarea.focus();
            return uniqueImageId; // Devuelve el ID para usarlo en imageStore
        }

        function handleImageFileSelect(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                // Primero inserta el placeholder y obtiene el ID
                const imageId = insertImagePlaceholderInTextarea(file.name); 
                
                const reader = new FileReader();
                reader.onload = function(loadEvent) {
                    imageStore[imageId] = loadEvent.target.result; // Guarda el Base64 en el store
                    generateHtmlPreview(); // Ahora genera la vista previa, ya que el Base64 está listo
                }
                reader.onerror = function(errorEvent) {
                    console.error("Error leyendo el archivo de imagen:", errorEvent);
                    alert("Hubo un error al intentar leer el archivo de imagen.");
                    // Opcional: remover el placeholder si la lectura falla
                    markdownInput.value = markdownInput.value.replace(new RegExp(`<img data-img-id="${imageId}"[^>]*>`, 'g'), '');
                }
                reader.readAsDataURL(file);
            } else if (file) {
                alert("Por favor, selecciona un archivo de imagen válido (jpg, png, gif, svg, webp, etc.).");
            }
            event.target.value = null; // Resetea el input
        }
        // --- FIN CAMBIOS PARA IMÁGENES ---

        function initializeApp() {
            themes.forEach((theme, index) => { const option = document.createElement('option'); option.value = index; option.textContent = theme.name; themeSelector.appendChild(option); });
            personalizationInputs.forEach(input => {
                const varName = input.dataset.cssVar;
                input.addEventListener('input', (event) => {
                    if (varName) {
                        document.documentElement.style.setProperty(varName, event.target.value);
                        generateHtmlPreview(); 
                    }
                });
            });
            themeSelector.addEventListener('change', (event) => {
                const selectedIndex = parseInt(event.target.value, 10);
                if (!isNaN(selectedIndex) && selectedIndex >= 0) {
                    applyTheme(selectedIndex);
                    generateHtmlPreview();
                }
            });
            generateBtn.addEventListener('click', generateHtmlPreview);
            downloadBtn.addEventListener('click', downloadHtml);
            insertAccordionBtn.addEventListener('click', insertAccordionTemplate);
            insertImageBtn.addEventListener('click', () => { imageFileInput.click(); });
            imageFileInput.addEventListener('change', handleImageFileSelect); // Usará el nuevo handleImageFileSelect
            
            applyTheme(0);
            themeSelector.value = "0";
            generateHtmlPreview();
        }

        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
